<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>IO配置</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <script type="text/javascript" src="../js/LAB.min.js"></script>
    <style type="text/css">
        body {
            display: none;
        }
    </style>
    <script type="text/javascript">
        $LAB
        .script("../js/launch.js?version=" + new Date().getTime()).wait(function () {
            init(function () {
                function isNotUndefinedOrNull(value) {
                    return (value != undefined && value != null);
                }
                var trigger_output_tab = new function () {

                    function parse_config_info(json) {
                        var cfg;
                        var filters = ["default", "whitelist", "not_whitelist", "no_licence", "blacklist"];
                        var input_value_list = [54, 55];
                        var output_value_list = [40, 56, 177, 173, 1485, 2485, 8131,150,171];
                        //var output_name_list = ["OUT1", "OUT2", "OUT3", "OUT4", "485", "NET"];
                        //var io_info = [{"OUT1":40},{"OUT2":56},{"OUT3":177},{"OUT4":173},{"485":1485},{"NET":8131}];
                        try {
                            cfg = jQuery.parseJSON(json);
                        }
                        catch (e) {
                            return null;
                        }

                        $("#tabs-1 input[type=checkbox]").check_val(false);
                        //set whitelist
                        if (isNotUndefinedOrNull(cfg.white_list)) {
                            $.each(cfg.white_list, function (io_index, io_val) {
                                var tg = $("[vzfilter='whitelist'][vzio=" + io_val + "]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='whitelist'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set not-whitelist
                        if (isNotUndefinedOrNull(cfg.not_white_list)) {
                            $.each(cfg.not_white_list, function (io_index, io_val) {
                                var tg = $("[vzfilter='whitelist'][vzio=" + io_val + "]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='not_whitelist'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set no_licence
                        if (isNotUndefinedOrNull(cfg.no_licence)) {
                            $.each(cfg.no_licence, function (io_index, io_val) {
                                var tg = $("[vzfilter='whitelist'][vzio=" + io_val + "]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='no_licence'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set black list
                        if (isNotUndefinedOrNull(cfg.black_list)) {
                            $.each(cfg.black_list, function (io_index, io_val) {
                                //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='blacklist'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set special_plates
                        if (isNotUndefinedOrNull(cfg.special_plates)) {
                            $.each(cfg.special_plates, function (io_index, io_val) {
                                //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='special_plates'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set in1
                        if (isNotUndefinedOrNull(cfg.ext_ioctl1)) {
                            $.each(cfg.ext_ioctl1, function (io_index, io_val) {
                                //var tg = $("[vzfilter='ext_ioctl1'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='ext_ioctl1'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set in2
                        if (isNotUndefinedOrNull(cfg.ext_ioctl2)) {
                            $.each(cfg.ext_ioctl2, function (io_index, io_val) {
                                //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='ext_ioctl2'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set in3
                        if (isNotUndefinedOrNull(cfg.ext_ioctl3)) {
                            $.each(cfg.ext_ioctl3, function (io_index, io_val) {
                                //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='ext_ioctl3'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }

                        //set in4
                        //if (isNotUndefinedOrNull(cfg.ext_ioctl4)) {
                        //    $.each(cfg.ext_ioctl4, function (io_index, io_val) {
                        //        //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                        //        if (jQuery.inArray(io_val, output_value_list) != -1) {
                        //            $("[vzfilter='ext_ioctl4'][vzio=" + io_val + "]").check_val(true);
                        //        }
                        //    });
                        //}

                        //set offline_alarm
                        if (isNotUndefinedOrNull(cfg.offline_alarm)) {
                            $.each(cfg.offline_alarm, function (io_index, io_val) {
                                //var tg = $("[vzfilter='whitelist'][vzio="+io_val+"]");
                                if (jQuery.inArray(io_val, output_value_list) != -1) {
                                    $("[vzfilter='offline_alarm'][vzio=" + io_val + "]").check_val(true);
                                }
                            });
                        }
                    }

                    function get_trigger_output() {
                        $.get("../vb.htm?getlinkagecfg",
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            parse_config_info(ajaxdata.split("=")[1]);
                        });
                    }

                    function set_trigger_output() {
                        sfm_cur_obj = $(this);
                        var cfg = {};
                        var arr = new Array();

                        arr = [];
                        $("[vzfilter='whitelist']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.white_list = arr;

                        arr = [];
                        $("[vzfilter='not_whitelist']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.not_white_list = arr;

                        arr = [];
                        $("[vzfilter='no_licence']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.no_licence = arr;

                        arr = [];
                        $("[vzfilter='blacklist']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.black_list = arr;

                        arr = [];
                        $("[vzfilter='special_plates']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.special_plates = arr;

                        arr = [];
                        $("[vzfilter='ext_ioctl1']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.ext_ioctl1 = arr;

                        arr = [];
                        $("[vzfilter='ext_ioctl2']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.ext_ioctl2 = arr;

                        arr = [];
                        $("[vzfilter='ext_ioctl3']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.ext_ioctl3 = arr;

                        //arr = [];
                        //$("[vzfilter='ext_ioctl4']").filter(function (index) {
                        //    if ($(this).check_val()) {
                        //        arr.push(parseInt($(this).attr('vzio')));
                        //    }
                        //    return true;
                        //});
                        //cfg.ext_ioctl4 = arr;

                        arr = [];
                        $("[vzfilter='offline_alarm']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.offline_alarm = arr;

                        var jsonstr = JSON.stringify(cfg);
                        $.get("../vb.htm?setlinkagecfg=" + jsonstr, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                            get_trigger_output();
                        });
                    }
                    var g_hw_version = "";
                    function get_boardversion_info() {
                        $.ajax({
                            url: "../vb.htm?getboardversioninfo",
                            success: function (ajaxdata) {
                                if (precheck(ajaxdata)) {
                                    return;
                                }
                                ajaxdata = ajaxdata.split("=");
                                if (!ajaxdata[0].match(/OK/)) {
                                    return;
                                }

                                var mask = 0x1;
                                mask = mask << 24;
                                
                                var decode = parseInt(ajaxdata[1]);
                                decode = mask | decode;
                                decode = decode.toString(2);
                                var d_type = decode.substring(decode.length - 24, decode.length - 12);
                                d_type = parseInt(d_type, 2);

                                var m_version = decode.substring(decode.length - 6);
                                m_version = parseInt(m_version, 2);

                                var s_version = decode.substring(decode.length - 12, decode.length - 6);
                                s_version = parseInt(s_version, 2);

                                var version = m_version + "." + s_version;
                                g_hw_version = version;

                                if (d_type == 2) {
                                    $(".ext_ioctl3_tr").remove();
                                    $("input[vzio='171']").parent().remove();
                                    $(".td_171").remove();
                                    $("input[vzio='173']").parent().remove();
                                    $(".td_173").remove();
                                    $(".head_td").attr("colspan", "8");
                                    //led
                                    $("#li-io-in3").remove();
                                    $("#li-io-out4").remove();
                                    $("#li-io-out6").remove();
                                    if(m_version == 1){
                                        $("input[vzio='177']").parent().remove();
                                        $(".td_177").remove();
                                        $(".head_td").attr("colspan", "7");
                                        $("#li-io-out5").remove();
                                    }
                                } else {
                                    if (version == "1.2" || version == "7.3" || version == "7.5" || version == "8.0") {
                                        $("input[vzio='173']").parent().remove();
                                        $(".td_173").remove();
                                        $(".head_td").attr("colspan", "8");
                                        //led
                                        $("#li-io-out6").remove();
                                    } else if (version == "5.8") {
                                        $("input[vzio='150']").parent().remove();
                                        $(".td_150").remove();
                                        $("input[vzio='171']").parent().remove();
                                        $(".td_171").remove();
                                        $(".head_td").attr("colspan", "7");
                                        $(".ext_ioctl3_tr").remove();
                                        //led
                                        $("#li-io-in3").remove();
                                        $("#li-io-out3").remove();
                                        $("#li-io-out4").remove();
                                    } else if (version == "8.1") {
                                        $("input[vzio='171']").parent().remove();
                                        $(".td_171").remove();
                                        $("input[vzio='173']").parent().remove();
                                        $(".td_173").remove();
                                        $(".head_td").attr("colspan", "7");
                                        //led
                                        $("#li-io-out4").remove();
                                        $("#li-io-out6").remove();
                                    } else if (version == "9.0") {
                                        $(".ext_ioctl3_tr").remove();
                                        $("input[vzio='171']").parent().remove();
                                        $(".td_171").remove();
                                        $("input[vzio='173']").parent().remove();
                                        $(".td_173").remove();
                                        $(".head_td").attr("colspan", "7");
                                        //led
                                        $("#li-io-in3").remove();
                                        $("#li-io-out4").remove();
                                        $("#li-io-out6").remove();
                                    } else if (version == "10.0") {
                                        $(".ext_ioctl3_tr").remove();
                                        $("input[vzio='150']").parent().remove();
                                        $(".td_150").remove();
                                        $("input[vzio='171']").parent().remove();
                                        $(".td_171").remove();
                                        $("input[vzio='177']").parent().remove();
                                        $(".td_177").remove();
                                        $("input[vzio='173']").parent().remove();
                                        $(".td_173").remove();
                                        $(".head_td").attr("colspan", "5");
                                        //led
                                        $("#li-io-in3").remove();
                                        $("#li-io-out3").remove();
                                        $("#li-io-out4").remove();
                                        $("#li-io-out5").remove();
                                        $("#li-io-out6").remove();
                                    }
                                }
                            },
                            async: false
                        });
                    }
                    this.init = function () {
                        $("#cfgtable td").attr("align", "center");
                        $("#submit_ioconfig_tabs1").click(set_trigger_output);
                        get_boardversion_info();
                        get_trigger_output();
                    }
                }

                var white_list_check_method_tab_s = new function () {
                    function parse_config_info(json) {
                        var cfg;
                        try {
                            cfg = jQuery.parseJSON(json);
                        }
                        catch (e) {
                            //alert(e.message);
                            return null;
                        }
                        
                        //whitelist_enable set
                        if (isNotUndefinedOrNull(cfg.filter_enable)) {
                            if (cfg.filter_enable == 1) $("#whitelist_enable").check_val(true);
                            else if (cfg.filter_enable == 2) $("#whitelist_disable").check_val(true);
                            else $("#whitelist_auto").check_val(true);
                        }
                    }
                    function get_white_list_check_method() {
                        $.get("../vb.htm?getwlcheckstatus",
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            parse_config_info(ajaxdata.split("=")[1]);
                        });
                    }

                    function set_white_list_check_method() {
                        var cfg = {};

                        if ($("#whitelist_enable").check_val()) cfg.filter_enable = 1;
                        else if ($("#whitelist_disable").check_val()) cfg.filter_enable = 2;
                        else cfg.filter_enable = 0;

                        var jsonstr = JSON.stringify(cfg);

                        $.get("../vb.htm?setwlcheckstatus=" + jsonstr, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                            get_white_list_check_method();
                        });
                    }

                    function fuzzy_parse_config_info(json) {
                        var cfg;
                        try {
                            cfg = jQuery.parseJSON(json);
                        }
                        catch (e) {
                            //alert(e.message);
                            return null;
                        }

                        //fuzzy_query set
                        if (isNotUndefinedOrNull(cfg.fuzzy_query_type)) {
                            if (cfg.fuzzy_query_type == 2) {
                                $("#fuzzy_normal_cc").check_val(true);
                                $("#lb_algin").removeAttr("disabled");
                            } else if (cfg.fuzzy_query_type == 1) {
                                $("#fuzzy_similar_cc").check_val(true);
                            } else {
                                $("#fuzzy_accurate").check_val(true);
                            }
                        }
                        else {
                            $("#fuzzy_accurate").check_val(true);
                        }
                        if (isNotUndefinedOrNull(cfg.fuzzy_ignore_cc)) {
                            if (cfg.fuzzy_ignore_cc == 1) $("#fuzzy_ignore_cc").check_val(true);
                            else $("#fuzzy_ignore_cc").check_val(false);
                        }
                        if (isNotUndefinedOrNull(cfg.fuzzy_query_len)) {
                            //$("#fuzzy_query_len").val(cfg.fuzzy_query_len);
                            if (cfg.fuzzy_query_len == 1) {
                                $("#fuzzy_query_len_1").check_val(true);
                            } else if (cfg.fuzzy_query_len == 2) {
                                $("#fuzzy_query_len_2").check_val(true);
                            } else if (cfg.fuzzy_query_len == 3) {
                                $("#fuzzy_query_len_3").check_val(true);
                            } else {
                                $("#fuzzy_query_len_0").check_val(true);
                            }
                        }
                    }
                    function get_fuzzy_query() {
                        $.get("../vb.htm?getwlfuzzyquery",
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            fuzzy_parse_config_info(ajaxdata.split("=")[1]);
                        });
                    }


                    function set_fuzzy_query() {
                        var cfg = {};

                        if ($("#fuzzy_similar_cc").prop('checked')) cfg.fuzzy_query_type = 1;
                        else if ($("#fuzzy_normal_cc").prop('checked')) cfg.fuzzy_query_type = 2;
                        else cfg.fuzzy_query_type = 0;

                        cfg.fuzzy_query_len = 0;//("#fuzzy_query_len").val();
                        if ($("#fuzzy_query_len_0").prop('checked')) {
                            cfg.fuzzy_query_len = 0;
                        } else if ($("#fuzzy_query_len_1").prop('checked')) {
                            cfg.fuzzy_query_len = 1;
                        } else if ($("#fuzzy_query_len_2").prop('checked')) {
                            cfg.fuzzy_query_len = 2;
                        } else if ($("#fuzzy_query_len_3").prop('checked')) {
                            cfg.fuzzy_query_len = 3;
                        }
                        //alert(cfg.fuzzy_query_len);

                        cfg.fuzzy_ignore_cc = $("#fuzzy_ignore_cc").prop('checked') ? 1 : 0;
                        var jsonstr = JSON.stringify(cfg);

                        $.get("../vb.htm?setwlfuzzyquery=" + jsonstr, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                            get_fuzzy_query();
                        });
                    }

                    this.init = function () {
                        $("#lb_algin").attr("disabled", "disabled");
                        if (g_style_time == "sfm") {
                            $("#submit_ioconfig_tabs3_sfm").click(function () {
                                sfm_cur_obj = $(this);
                                set_white_list_check_method();
                                set_fuzzy_query();
                            });
                        } else {
                            $("#submit_ioconfig_tabs3").click(set_white_list_check_method);
                            $("#submit_ioconfig_tabs4").click(set_fuzzy_query);
                        }

                        $("input[name='fuzzy_query_type']").click(function () {
                            if ($(this).attr("id") == "fuzzy_normal_cc") {
                                $("#lb_algin").removeAttr("disabled");
                            } else {
                                if (!$("#fuzzy_query_len_0").prop('checked')) {
                                    $("#fuzzy_query_len_0").check_val(true);
                                }
                                $("#lb_algin").attr("disabled", "disabled");
                            }
                            if ($(this).attr("id") == "fuzzy_accurate") {
                                $("#fuzzy_ignore_cc").check_val(false);
                                $("#fuzzy_ignore_cc").attr("disabled", "disabled");
                            } else {
                                $("#fuzzy_ignore_cc").removeAttr("disabled");
                            }
                        });
                        get_fuzzy_query();
                        get_white_list_check_method();
                    }
                }

                var uart_tab_s = new function () {
                    var g_baudrate = null;
                    var g_parity = null;
                    var g_databits = null;
                    var g_stopbit = null;
                    //检查值是否是一个选项
                    function get_uart(channel) {
                        var request_string;
                        var name = "";
                        if (g_style_time == "sfm") {
                            name = channel;
                        }
                        request_string = "../vb.htm?paratest=uart." + channel;
                        $.get(request_string, function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            if ("OK" != ajaxdata.slice(0, 2)) return false;
                            var slicestring = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                            var decode = Base64.decode(slicestring);
                            decode = decode.split(":");
                            g_baudrate = decode[0];
                            g_parity = decode[1];
                            g_databits = decode[2];
                            g_stopbit = decode[3];
                            $('#ptz_baudrate' + name).select_val(g_baudrate);
                            $('#ptz_parity' + name).select_val(g_parity);
                            $('#ptz_databits' + name).select_val(g_databits);
                            $('#ptz_stopbit' + name).select_val(g_stopbit);
                        });
                    }

                    function set_uart(channel) {
                        var name = "";
                        if (g_style_time == "sfm") {
                            name = channel;
                        }
                        var baudrate = $("#ptz_baudrate" + name).select_val();
                        var parity = $("#ptz_parity" + name).select_val();
                        var databits = $("#ptz_databits" + name).select_val();
                        var stopbit = $("#ptz_stopbit" + name).select_val();

                        var data = baudrate + ":" +
                                +parity + ":" + databits + ":" + stopbit;
                        //alert(data);
                        var base64 = Base64.encode(data);
                        var request_string;
                        request_string = "../vb.htm?uart=" + base64 + "." + channel;
                        //alert(request_string);
                        $.get(request_string, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                        });
                    }


                    var g_cur_channel_1 = null;
                    function load_cur_channel(channel) {
                        g_cur_channel_1 = channel;
                        //alert(g_cur_channel_1);
                        get_uart(channel);
                    }

                    function init_channels() {
                        var option_html = "";
                        for (var i = 0; i < 2; i++) {
                            var channel_name = i + 1;
                            option_html += "<option value=\"" + i + "\">" + channel_name + "</option>";
                        }
                        $("#cur_channel_1").html(option_html);
                        init_selectmenu('#cur_channel_1', 130, 150, function (e, object) {
                            load_cur_channel(object.value);
                        });
                    }

                    function set_uart_channel() {
                        if (g_style_time == "sfm") {
                            sfm_cur_obj = $(this);
                            set_uart(0);
                            set_uart(1);
                        } else {
                            set_uart(g_cur_channel_1);
                        }
                    }

                    this.init = function () {
                        $("#uart_submit").click(set_uart_channel);
                        load_cur_channel(0);
                        if (g_style_time != "sfm") {
                            init_channels();
                        } else {
                            load_cur_channel(1);
                        }
                    }
                }

                var serial_out_tab = new function () {
                    var g_tr_pos;
                    var voice_json = {
                        "in": {
                            "prefix": "",
                            "suffix": "",
                            "inc_license": true
                        },
                        "out": {
                            "prefix": "",
                            "suffix": "",
                            "inc_license": true
                        },
                        "na": {
                            "prefix": "",
                            "suffix": "",
                            "inc_license": true
                        },
                        "iw": {
                            "prefix": "",
                            "suffix": "",
                            "remain": 0,
                            "inc_license": true
                        }
                    };
                    //var g_demostr;
                    function check_item_set(n, name) {
                        if (typeof (n[name]) != "undefined" && n[name] != null) {
                            c = $("#comm_" + name);
                            var fmt = $("#comm_" + name + "_fmt");
                            val = n[name];

                            $("#comm_" + name).check_val(true);

                            if (name == "license" && val == 1) {
                                $("#comm_encryption_fmt").select_val(val);
                                update_demotext();
                            }

                            /*if(name =="header") g_demostr+=val;
                            else if(name =="checksum") g_demostr+="FF";
                            else if(name =="edian") g_demostr;
                            else g_demostr+=$("#comm_"+name).attr("dmvalue");*/


                            var tr_current = c.parent().parent();
                            tr_current.insertAfter(g_tr_pos);
                            g_tr_pos = tr_current;


                            if (!jQuery.isEmptyObject(fmt)) {
                                if (fmt.is("select")) fmt.select_val(val);
                                else fmt.val(val);
                            }
                            return true;
                        }
                        else {
                            return false;
                        }
                    }
                    function parse_comm_config(cfg) {
                        var itemname = ["enable", "license", "licensecolor", "licensetype", "confidence", "direction", "rect", "trigger", "carcolor", "time", "duetime","wlresult", "out", "sn", "ciphertext", "id"];
                        g_tr_pos = $("#tr_header");

                        var header, end, checkbegin, checkend, checksum, edian, encode;
                        $.each(cfg, function (i, n) {
                            if (isNotUndefinedOrNull(n["header"])) {
                                header = n["header"];
                            }
                            else if (isNotUndefinedOrNull(n["end"])) {
                                end = n["end"];
                            }
                            else if (isNotUndefinedOrNull(n["checkbegin"])) {
                                checkbegin = n["checkbegin"];
                            }
                            else if (isNotUndefinedOrNull(n["checkend"])) {
                                checkend = n["checkend"];
                            }
                            else if (isNotUndefinedOrNull(n["checksum"])) {
                                checksum = n["checksum"];
                            }
                            else if (isNotUndefinedOrNull(n["edian"])) {
                                edian = n["edian"];
                            }
                            else if (isNotUndefinedOrNull(n["encode"])) {
                                encode = n["encode"];
                            }
                            else if (isNotUndefinedOrNull(n["voice"])) {
                                $("#comm_voice").check_val(true);
                                voice_json = n["voice"];
                                init_default_voice();
                            }
                            else if (isNotUndefinedOrNull(n["ne_compatible"])) {
                                $("#comm_ne_compatible").select_val(n["ne_compatible"]);
                            }
                            else {
                                for (var key in itemname) {
                                    if (check_item_set(n, itemname[key]) == true) break;
                                }
                            }
                        });

                        $("#comm_header_fmt").val(header);
                        $("#comm_end_fmt").val(end);
                        $('#comm_checksum_fmt').select_val(checksum);
                        $('#comm_edian_fmt').select_val(edian);
                        $('#comm_encode_fmt').select_val(encode);

                        update_demotext_and_selections();

                        var checkbegin_val = checkbe_value_to_key(checkbegin, checkend);
                        var checkend_val = checkbe_value_to_key2(checkbegin, checkend);

                        $('#comm_checkbegin_fmt').select_val(checkbegin_val["begin"]);
                        $('#comm_checkend_fmt').select_val(checkend_val["end"]);
                    }
                    var g_cfg_table_cur_index = -1;

                    function select_comm_cfg_table_item(index, cl) {
                        if (index < 0) return false;
                        index += 1;
                        //alert(index+"*"+g_cfg_table_cur_index);

                        var tr_item = $("#comm_cfg_tbl tr");
                        if (tr_item.eq(index).length == 0) return false;
                        if (g_cfg_table_cur_index != -1 && g_cfg_table_cur_index < tr_item.length) {
                            tr_item.eq(g_cfg_table_cur_index).removeClass("ui-state-active");
                        }
                        tr_item.eq(index).addClass("ui-state-active");
                        g_cfg_table_cur_index = index;
                    }
                    function cfg_table_moveup() {
                        var cur_index = g_cfg_table_cur_index;
                        if (cur_index == -1) {
                            alert("请选择一个字段！");
                            return false;
                        }
                        var max_index = $("#comm_cfg_tbl tr").length - 2;
                        if (cur_index >= max_index) return false;
                        var index_new = cur_index - 1;
                        if (cur_index == index_new || index_new < 2 || index_new >= max_index) return false;
                        var tr_item = $("#comm_cfg_tbl tr");
                        var current_item = tr_item.eq(cur_index);
                        var next_item = tr_item.eq(index_new);
                        next_item.insertAfter(current_item);
                        g_cfg_table_cur_index = index_new;
                    }
                    function cfg_table_movedown() {
                        var cur_index = g_cfg_table_cur_index;
                        if (cur_index == -1) {
                            alert("请选择一个字段！");
                            return false;
                        }
                        var max_index = $("#comm_cfg_tbl tr").length - 2;
                        if (cur_index <= 1) return false;
                        var index_new = cur_index + 1;

                        if (cur_index == index_new || index_new < 2 || index_new >= max_index) return false;
                        var tr_item = $("#comm_cfg_tbl tr");
                        var current_item = tr_item.eq(cur_index);
                        var next_item = tr_item.eq(index_new);
                        current_item.insertAfter(next_item);
                        g_cfg_table_cur_index = index_new;
                    }
                    function setchecked(id, val) {
                        setchecked_obj($("#" + id), val);
                    }
                    function setchecked_obj(obj, val) {
                        obj.check_val(val);
                    }
                    function set_check_list(items) {
                        //to-do check valid
                        $("input[usedfor='comm_cfg']:checked").each(function (itm) {
                            setchecked_obj($(this), false);
                        });
                        var tr_pos = $("#tr_header");
                        $.each(items, function (i, n) {
                            var c = $("#" + n);
                            if (!jQuery.isEmptyObject(c)) {
                                setchecked_obj(c, true);
                                var tr_current = c.parent().parent();
                                tr_current.insertAfter(tr_pos);
                                tr_pos = tr_current;
                            }
                        });
                    }

                    function gen_comm_cfg_key_str(call_back, call_back2) {
                        var dmestr = $("#comm_header_fmt").val();
                        $("input[usedfor='comm_cfg']:checked").each(function (itm) {
                            var id = $(this)[0].id;


                            if (call_back) {
                                call_back($(this), dmestr);
                            }
                            if (id == "comm_time" || id == "comm_duetime") {
                                var fmt = $("#" + id + "_fmt").select_val();
                                if (fmt == "1") {
                                    dmestr += "20150707132529";
                                } else if (fmt == "2") {
                                    dmestr += "150707132529";
                                } else if (fmt == "3") {
                                    dmestr += "29251307072015";
                                } else if (fmt == "4") {
                                    dmestr += "292513070715";
                                } else if (fmt == "5") {
                                    dmestr += "20150707";
                                } else if (fmt == "6") {
                                    dmestr += "150707";
                                } else if (fmt == "7") {
                                    dmestr += "2015070713252932";
                                }else {
                                    dmestr += "20150707";
                                }
                            }
                            else {
                                dmestr += $(this).attr("dmvalue");
                            }
                            if (call_back2) {
                                call_back2($(this), dmestr);
                            }
                        });
                        if ($("#comm_checksum_fmt").select_val() != "none") dmestr += "FF";
                        dmestr += $("#comm_end_fmt").val();
                        if ($("#comm_voice").is(":checked")) {
                            dmestr += $("#comm_voice").attr("dmvalue");
                        }
                        return dmestr;
                    }

                    function checkbe_value_to_key(begin_val, end_val) {
                        var values = {};
                        gen_comm_cfg_key_str(function (item, dmestr) {
                            if (begin_val == dmestr.length / 2) {
                                values["begin"] = item[0].id;
                            }
                            if (end_val == dmestr.length / 2) {
                                values["end"] = item[0].id;
                            }
                        }, null);
                        return values;
                    }

                    function checkbe_value_to_key2(begin_val, end_val) {
                        var values2 = {};
                        gen_comm_cfg_key_str(null, function (item, dmestr) {
                            if (begin_val == dmestr.length / 2) {
                                values2["begin"] = item[0].id;
                            }
                            if (end_val == dmestr.length / 2) {
                                values2["end"] = item[0].id;
                            }
                        });
                        return values2;
                    }

                    function checkbe_key_to_value(values) {
                        gen_comm_cfg_key_str(function (item, dmestr) {
                            var id = item[0].id;
                            if (isNotUndefinedOrNull(values[id])) {
                                values[id] = dmestr.length / 2;
                            }
                        }, null);
                        return values;
                    }
                    function checkbe_key_to_value2(values2) {
                        gen_comm_cfg_key_str(null, function (item, dmestr) {
                            var id = item[0].id;
                            if (isNotUndefinedOrNull(values2[id])) {
                                values2[id] = dmestr.length / 2;
                            }
                        });
                        return values2;
                    }
                    
                    function set_default_encryption() {
                        $("#comm_encryption_fmt").select_val(0);
                        $("#tr_license td:eq(2)").html("7个字节");
                        $("#comm_license").attr("dmvalue", "00413132333435");
                    }
                    function update_demotext_and_selections() {
                        var option_text_begin = "";
                        var option_text_end = "";
                        var i = 0;
                        var value_begin = 0;
                        var value_end = 0;

                        if (!$("#comm_license").is(":checked")) {
                            set_default_encryption();
                        }

                        var dmestr = gen_comm_cfg_key_str(function (item, str) {
                            var id = item[0].id;
                            var name = item[0].name;
                            if (i == 0) {
                                value_begin = id;
                            }
                            value_end = id;
                            option_text_begin += "<option value=\"" + id + "\">" + name + "</option>";
                            option_text_end += "<option value=\"" + id + "\">" + name + "</option>";
                            i++;
                        },null);

                        $("#demodisplay").html(dmestr);

                        if (option_text_begin == "") {
                            option_text_begin = "<option value=\"-1\" disabled=\"disabled\">无</option>";
                        }
                        if (option_text_end == "") {
                            option_text_end = "<option value=\"-1\" disabled=\"disabled\">无</option>";
                        }

                        $("#comm_checkbegin_fmt").html(option_text_begin);
                        $("#comm_checkend_fmt").html(option_text_end);
                        $("#comm_checkbegin_fmt").selectmenu("refresh");
                        $("#comm_checkend_fmt").selectmenu("refresh");
                        $('#comm_checkbegin_fmt').select_val(value_begin);
                        $('#comm_checkend_fmt').select_val(value_end);
                    }

                    function set_default_cfg() {
                        $("#comm_header_fmt").val("BB88");
                        $("#comm_end_fmt").val("33");
                        $('#comm_checkbegin_fmt').select_val(0);
                        $('#comm_checkend_fmt').select_val(0);
                        $('#comm_checksum_fmt').select_val("xor");
                        $('#comm_edian_fmt').select_val("little");
                        set_default_encryption();
                        $('#comm_encode_fmt').select_val(1);
                        var tr_item = $("#comm_cfg_tbl tr");
                        if (g_cfg_table_cur_index != -1 && g_cfg_table_cur_index < tr_item.length) {
                            tr_item.eq(g_cfg_table_cur_index).removeClass("ui-state-active");
                            g_cfg_table_cur_index = -1;
                        }
                    }
                    function set_comm_simple_cfg() {
                        set_default_cfg();
                        var items = ["comm_enable", "comm_licensecolor", "comm_license"];
                        set_check_list(items);
                        //alert("2");
                        update_demotext_and_selections();
                    }

                    function set_comm_normal_cfg() {
                        set_default_cfg();
                        var items = ["comm_enable", "comm_license", "comm_licensecolor", "comm_confidence", "comm_sn", "comm_wlresult"];
                        set_check_list(items);
                        //alert("3");
                        update_demotext_and_selections();
                    }
                    function set_comm_all_cfg() {
                        $("#comm_header_fmt").val("BB88");
                        $("#comm_end_fmt").val("33");
                        $('#comm_checkbegin_fmt').select_val(0);
                        $('#comm_checkend_fmt').select_val(0);
                        $('#comm_checksum_fmt').select_val("xor");
                        $('#comm_edian_fmt').select_val("little");
                        $("input[usedfor='comm_cfg']").each(function (itm) {
                            setchecked_obj($(this), true);
                        });
                        //alert("4");
                        update_demotext_and_selections();
                    }
                    //function set_comm_all_cfg() {
                    //    $("input[usedfor='comm_cfg']").each(function (itm) {
                    //        setchecked_obj($(this), true);
                    //    });
                    //    //alert("5");
                    //    update_demotext_and_selections();
                    //}
                    function make_json_item_comm(item, fmt) {
                        var key = item.substr(5);
                        var obj = new Object();
                        obj[key] = fmt;
                        return obj;
                    }
                    function make_json_item(item, fmt) {
                        if (fmt == "") fmt = "0";
                        var key = item.substr(5);
                        var obj = new Object();
                        obj[key] = fmt;
                        return obj;
                    }
                    function make_json_item_end(item, fmt) {
                        if (fmt == "") fmt = "0";
                        var key = item.substr(5);
                        var obj = new Object();
                        obj[key] = fmt;
                        return obj;
                    }
                    function set_comm_push_config(cfg) {
                        //添加头，校验，大小端
                        var header = $("#comm_header_fmt").val();
                        //if (header == "") return false;
                        var patt = new RegExp("[^a-fA-F0-9]");
                        var ret_test = patt.test(header);

                        if (header != "" && (ret_test || header.length % 2 != 0)) { alert("标志头格式不对，要求16进制数据"); return ""; }

                        var arr = Array();

                        arr.push(make_json_item_comm("comm_header", header));
                        var demostr = header;

                        $("input[usedfor='comm_cfg']:checked").each(function (index) {
                            keyid = $(this)[0].id;
                            if (jQuery.type(keyid) == "string") {
                                fmt = 0;
                                if (keyid == "comm_time") {
                                    fmt = $("#comm_time_fmt").val();
                                }
                                else if (keyid == "comm_duetime") {
                                    fmt = $("#comm_duetime_fmt").val();
                                }
                                else if (keyid == "comm_license") {
                                    fmt = $("#comm_encryption_fmt").val();
                                }
                                arr.push(make_json_item(keyid, fmt));
                            }
                        });

                        var check_begin = {};
                        var check_end = {};
                        check_begin[$("#comm_checkbegin_fmt").val()] = 0;
                        check_begin[$("#comm_checkend_fmt").val()] = 0;
                        check_end[$("#comm_checkbegin_fmt").val()] = 0;
                        check_end[$("#comm_checkend_fmt").val()] = 0;


                        check_begin = checkbe_key_to_value(check_begin);
                        check_end = checkbe_key_to_value2(check_end);

                        var checkbegin = check_begin[$("#comm_checkbegin_fmt").val()];
                        var checkend = check_end[$("#comm_checkend_fmt").val()];
                        if (checkbegin >= checkend && checkbegin != 0 && checkend != 0) {
                            alert("校验结束位小于校验起始位，请重新选择校验起始位和结束位");
                            return false;
                        }
                        arr.push(make_json_item("comm_checkbegin", checkbegin.toString()));
                        arr.push(make_json_item("comm_checkend", checkend.toString()));
                        arr.push(make_json_item_comm("comm_checksum", $("#comm_checksum_fmt").val()));
                        var end = $("#comm_end_fmt").val();
                        //if(end =="")return false;
                        //var patt = new RegExp("[^a-fA-F0-9]");
                        var ret_end_test = patt.test(end);
                        if (ret_end_test || end.length % 2 != 0) { alert("标准尾格式不对，要求16进制数据"); return ""; }
                        arr.push(make_json_item_comm("comm_end", end));
                        arr.push(make_json_item("comm_encode", $("#comm_encode_fmt").val()));
                        arr.push(make_json_item_comm("comm_edian", $("#comm_edian_fmt").val()));
                        var tr_item = $("#comm_cfg_tbl tr");
                        if (g_cfg_table_cur_index != -1 && g_cfg_table_cur_index < tr_item.length) {
                            tr_item.eq(g_cfg_table_cur_index).removeClass("ui-state-active");
                        }
                        if($("#comm_voice").is(":checked")){
                            arr.push(make_json_item_comm("comm_voice", voice_json));
                        }
                        var ne_compatible = $("#comm_ne_compatible").select_val();
                        arr.push(make_json_item_comm("comm_ne_compatible", ne_compatible));

                        cfg.comm_push_cfg = arr;
                        return true;
                    }

                    function parse_config_info(json) {
                        var cfg;
                        try {
                            cfg = jQuery.parseJSON(json);
                        }
                        catch (e) {
                            //alert(e.message);
                            return null;
                        }
                        if (isNotUndefinedOrNull(cfg.comm_push_cfg)) {
                            parse_comm_config(cfg.comm_push_cfg);
                        }
                    }
                    function get_serial_out() {
                        $.get("../vb.htm?getrs485push",
                        function (ajaxdata) {
                            //alert(ajaxdata);
                            if (precheck(ajaxdata)) {
                                return false;
                            } 
                            parse_config_info(ajaxdata.substring(ajaxdata.indexOf("=") + 1));
                        });
                    }

                    function set_serial_out() {
                        sfm_cur_obj = $(this);
                        var cfg = {};
                        if (!set_comm_push_config(cfg)) return;
                        var jsonstr = JSON.stringify(cfg);
                        //alert(jsonstr);

                        $.get("../vb.htm?setrs485push=" + jsonstr, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                            //get_serial_out();
                        });
                    }

                    function update_demotext() {
                        if ($("#comm_encryption_fmt").val() == "0") {
                            $("#tr_license td:eq(2)").html("7个字节");
                            $("#comm_license").attr("dmvalue", "00413132333435");
                        } else if ($("#comm_encryption_fmt").val() == "1") {
                            $("#tr_license td:eq(2)").html("16个字节");
                            $("#comm_license").attr("dmvalue", "0908070605040302010A0B0C0D0E0F10");
                        }
                        if ($("#comm_license").is(":checked")) {
                            update_demotext_and_selections();
                        }
                    }

                    function update_prefix_and_suffix() {
                        var type = $("#comm_voice_fmt").val();
                        if (type == "iw") {
                            $("#hide_remain_tr").show();
                            $("#comm_remain_fmt").select_val(voice_json[type]["remain"]);
                        } else {
                            $("#hide_remain_tr").hide();
                        }
                        if (voice_json) {
                            $("#comm_prefix_fmt").val(Base64.decode(voice_json[type]["prefix"], true));
                            $("#comm_suffix_fmt").val(Base64.decode(voice_json[type]["suffix"], true));
                            $("#comm_inc").check_val(voice_json[type]["inc_license"]);
                        }
                    }

                    function set_curtype_voice() {
                        if (this.value.length > 36) {
                            alert("语音信息长度不能超过36个字符");
                        } else {
                            var type = $("#comm_voice_fmt").val();
                            voice_json[type][$(this).attr("name")] = Base64.encode(this.value, true);
                        }
                    }
                    function update_remain() {
                        voice_json["iw"]["remain"] = parseInt($("#comm_remain_fmt").val());
                    }
                    function update_inc_license() {
                        var type = $("#comm_voice_fmt").val();
                        voice_json[type]["inc_license"] = $("#comm_inc").is(":checked") ? true:false;
                    }
                    function init_default_voice() {
                        var isAllEmpty = true;
                        var strArr = ["in","out","na","iw"];
                        for (var i = 0; i < strArr.length; i++) {
                            var obj = strArr[i];
                            if (voice_json[obj]["prefix"] != "" || voice_json[obj]["suffix"] != "") {
                                $("#comm_voice_fmt").select_val(obj);
                                $("#comm_prefix_fmt").val(Base64.decode(voice_json[obj]["prefix"], true));
                                $("#comm_suffix_fmt").val(Base64.decode(voice_json[obj]["suffix"], true));
                                $("#comm_remain_fmt").select_val(voice_json["iw"]["remain"]);
                                usable_voice();
                                $("#comm_inc").check_val(voice_json[obj]["inc_license"]);
                                isAllEmpty = false;
                                break;
                            }
                        }
                        if (isAllEmpty) {
                            $("#comm_voice_fmt").select_val("in");
                            $("#comm_prefix_fmt").val(Base64.decode(voice_json["in"]["prefix"], true));
                            $("#comm_suffix_fmt").val(Base64.decode(voice_json["in"]["suffix"], true));
                            $("#comm_remain_fmt").select_val(voice_json["iw"]["remain"]);
                            usable_voice();
                            $("#comm_inc").check_val(voice_json["in"]["inc_license"]);
                        }
                    }
                    function usable_voice() {
                        $("#comm_voice_fmt").selectmenu("enable");
                        $("#comm_prefix_fmt").removeAttr("disabled");
                        $("#comm_suffix_fmt").removeAttr("disabled");
                        $("#comm_inc").removeAttr("disabled");
                        $("#hide_remain_tr").hide();
                    }
                    function disable_voice() {
                        $("#comm_voice_fmt").selectmenu("disable");
                        $("#comm_prefix_fmt").attr("disabled", "disabled");
                        $("#comm_suffix_fmt").attr("disabled", "disabled");
                        $("#comm_inc").attr("disabled", "disabled");
                        $("#comm_inc").check_val(false);
                        $("#hide_remain_tr").hide();
                    }
                    function update_state() {
                        if ($("#comm_voice").is(":checked")) {
                            init_default_voice();
                        } else {
                            disable_voice();
                        }
                        update_demotext_and_selections();
                    }
                    this.init = function () {
                        $("#comm_moveup").click(cfg_table_moveup);
                        $("#comm_movedown").click(cfg_table_movedown);
                        $("#comm_simple_cfg").click(set_comm_simple_cfg);
                        $("#comm_normal_cfg").click(set_comm_normal_cfg);
                        $("#comm_all_cfg").click(set_comm_all_cfg);
                        $("#comm_set_submit").click(set_serial_out);
                        $("#comm_header_fmt").val("BB88");
                        $("#comm_end_fmt").val("33");
                        $("#comm_time_fmt").on("selectmenuchange", function (event, ui) { update_demotext_and_selections(); });
                        $("#comm_duetime_fmt").on("selectmenuchange", function (event, ui) { update_demotext_and_selections(); });
                        $("#comm_checksum_fmt").on("selectmenuchange", function (event, ui) { update_demotext_and_selections(); });
                        $("#comm_cfg_tbl td").click(function () {
                            select_comm_cfg_table_item($(this).parent().index() - 1, true);
                        });
                        $(":checkbox[usedfor='comm_cfg']").click(update_demotext_and_selections);
                        $("#comm_encryption_fmt").on("selectmenuchange", function (event, ui) { update_demotext(); });
                        $("#comm_voice_fmt").on("selectmenuchange", function (event, ui) { update_prefix_and_suffix(); });
                        $("#comm_remain_fmt").on("selectmenuchange", function (event, ui) { update_remain(); });
                        init_selectmenu("#comm_remain_fmt", 130, 150);
                        $("#comm_voice_fmt").selectmenu("disable");
                        $("#comm_prefix_fmt").change(set_curtype_voice);
                        $("#comm_suffix_fmt").change(set_curtype_voice);
                        $("#comm_inc").click(update_inc_license);
                        $("#comm_voice").click(update_state);

                        $("#comm_header_fmt").change(function () { update_demotext_and_selections(); });
                        $("#comm_end_fmt").change(function () { update_demotext_and_selections(); });
                        get_serial_out();
                    }
                }

                var alarm_show_page = new function() {
                    var g_drawtarget = null;
                    var g_drawrule = null;
                    var g_drawTrajectory = null;
                    var g_camhealthalarm = null;
                    var g_enableexttrigger = null;
                    var g_cur_channel = null;
                    function get_alarm_drawmode(channel) {
                        $.get("../vb.htm?paratest=drawmode." + channel, function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            if ("OK" != ajaxdata.slice(0, 2)) return false;
                            var slicestring = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                            var decode = Base64.decode(slicestring);
                            decode = decode.split(":");
                            $("#drawtarget").check_val(decode[0] == 1);
                            $("#drawrule").check_val(decode[1] == 1);
                            $("#drawTrajectory").check_val(decode[2] == 1);
                            g_drawtarget = decode[0];
                            g_drawrule = decode[1];
                            g_drawTrajectory = decode[2];
                        });
                    }

                    function set_alarm_drawmode(channel) {
                        var drawtarget = $("#drawtarget").check_val() ? "1" : "0";
                        var drawrule = $("#drawrule").check_val() ? "1" : "0";
                        var drawTrajectory = $("#drawTrajectory").check_val() ? "1" : "0";
                        if (drawtarget != g_drawtarget || drawrule != g_drawrule || drawTrajectory != g_drawTrajectory) {
                            var drawmodedata = drawtarget + ':' + drawrule + ':' + drawTrajectory + ':0:0';//res先置为0
                            var base64 = Base64.encode(drawmodedata);
                            $.get("../vb.htm?setdrawmodel1=" + base64 + "." + channel, function (ajaxdata) {
                                default_ajax_handler(ajaxdata);
                                get_alarm_drawmode(channel);
                            });
                            return true;
                        }
                        return false;
                    }

                    function get_camhealthenable(channel) {
                        $.get("../vb.htm?paratest=camhealthalarmenable." + channel, function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            if ("OK" != ajaxdata.slice(0, 2)) return false;
                            g_camhealthalarm = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                            $("#camhealthalarm").check_val(g_camhealthalarm == 1);
                        });
                    }

                    var g_platefilter = null;

                    function get_platefiltermode() {
                        var cmd, len, data;

                        cmd = 4;
                        data = "0";
                        len = data.length;
                        var base64 = Base64.encode(data);
                        var senddata = cmd + ":" + len + ":" + base64;
                        $.ajax({
                            type: "POST",
                            url: "../getivsctrl.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                if (precheck(ajaxdata)) {
                                    return false;
                                }
                                if ("OK" != ajaxdata.slice(0, 2)) return false;
                                var decode = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                                decode = decode.split(":");
                                decode = Base64.decode(decode[2]);
                                decode = parseInt(decode);
                                g_platefilter = decode;
                                var mask = 0x1;

                                var bOutStable = decode & mask;
                                var bOutVloop = decode & (mask << 1);
                                var bOutIo1 = decode & (mask << 4);
                                var bOutIo2 = decode & (mask << 5);
                                var bOutIo3 = decode & (mask << 6);

                                $("#stable").check_val(bOutStable > 0);
                                $("#vloop").check_val(bOutVloop > 0);
                                $("#out_io1").check_val(bOutIo1 > 0);
                                $("#out_io2").check_val(bOutIo2 > 0);
                                $("#out_io3").check_val(bOutIo3 > 0);
                            },
                            dataType: "text"
                        });
                    }

                    function set_platefiltermode() {
                        var cmd, len, data;
                        cmd = 5;
                        var bOutStable = $("#stable").check_val() ? "1" : "0";
                        var bOutVloop = $("#vloop").check_val() ? "1" : "0";
                        var bOutIo1 = $("#out_io1").check_val() ? "1" : "0";
                        var bOutIo2 = $("#out_io2").check_val() ? "1" : "0";
                        var bOutIo3 = $("#out_io3").check_val() ? "1" : "0";
                        var platefilter = parseInt(bOutStable) | (parseInt(bOutVloop) << 1) | (parseInt(bOutIo1) << 4) | (parseInt(bOutIo2) << 5) | (parseInt(bOutIo3) << 6);

                        if (g_platefilter == platefilter) {
                            return false;
                        }

                        data = platefilter.toString();
                        len = data.length;
                        var base64 = Base64.encode(data);
                        var senddata = cmd + ":" + len + ":" + base64;

                        var data = cmd + ":" + len + ":" + base64;
                        $.ajax({
                            type: "POST",
                            url: "../ivsctrl.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                default_ajax_handler(ajaxdata);
                                g_platefilter = platefilter;
                            },
                            dataType: "text"
                        });
                    }

                    function set_camhealthenable(channel) {
                        var camhealthalarm = $("#camhealthalarm").check_val() ? "1" : "0";
                        if (camhealthalarm != g_camhealthalarm) {
                            $.get("../vb.htm?setcamhealthalarmenable=" + camhealthalarm + "." + channel, function (ajaxdata) {
                                default_ajax_handler(ajaxdata);
                                get_camhealthenable();
                            });
                            return true;
                        }
                        return false;
                    }

                    var g_distinguish_type = 0;

                    function get_distinguish_type() {
                        var cmd, len, data;

                        cmd = 8;
                        data = "0";
                        len = data.length;
                        var base64 = Base64.encode(data);
                        var senddata = cmd + ":" + len + ":" + base64;
                        $.ajax({
                            type: "POST",
                            url: "../getivsctrl.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                if (precheck(ajaxdata)) {
                                    return false;
                                }
                                if ("OK" != ajaxdata.slice(0, 2)) return false;
                                var decode = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                                decode = decode.split(":");
                                decode = Base64.decode(decode[2]);
                                decode = parseInt(decode);
                                g_distinguish_type = decode;

                                $("#blue").check_val((decode & (1 << 1)) > 0);
                                $("#yellow").check_val(((decode & (1 << 3)) || (decode & (1 << 4))) > 0);
                                $("#black").check_val((decode & (1 << 2)) > 0);
                                $("#coach").check_val((decode & (1 << 13)) > 0);
                                $("#police").check_val((decode & (1 << 5)) > 0);
                                $("#armpol").check_val(((decode & (1 << 6)) || (decode & (1 << 15))) > 0);
                                $("#army").check_val(((decode & (1 << 8)) || (decode & (1 << 9))) > 0);
                                $("#hongkongmacao").check_val(((decode & (1 << 11)) || (decode & (1 << 14))) > 0);
                                $("#embassy").check_val((decode & (1 << 10)) > 0);
                            },
                            dataType: "text"
                        });
                    }

                    function set_distinguish_type() {
                        var cmd, len, data;
                        cmd = 7;
                        var distinguish_type = 0;
                        if ($("#blue").check_val()) {
                            distinguish_type = distinguish_type | (1 << 1);
                        }
                        if ($("#yellow").check_val()) {
                            distinguish_type = distinguish_type | (1 << 3);
                            distinguish_type = distinguish_type | (1 << 4);
                        }
                        if ($("#black").check_val()) {
                            distinguish_type = distinguish_type | (1 << 2);
                        }
                        if ($("#coach").check_val()) {
                            distinguish_type = distinguish_type | (1 << 13);
                        }
                        if ($("#police").check_val()) {
                            distinguish_type = distinguish_type | (1 << 5);
                        }
                        if ($("#armpol").check_val()) {
                            distinguish_type = distinguish_type | (1 << 6);
                            distinguish_type = distinguish_type | (1 << 15);
                        }
                        if ($("#army").check_val()) {
                            distinguish_type = distinguish_type | (1 << 8);
                            distinguish_type = distinguish_type | (1 << 9);
                        }
                        if ($("#hongkongmacao").check_val()) {
                            distinguish_type = distinguish_type | (1 << 11);
                            distinguish_type = distinguish_type | (1 << 14);
                        }
                        if ($("#embassy").check_val()) {
                            distinguish_type = distinguish_type | (1 << 10);
                        }

                        if (g_distinguish_type == distinguish_type) {
                            return false;
                        }

                        data = distinguish_type.toString();
                        len = data.length;
                        var base64 = Base64.encode(data);
                        var senddata = cmd + ":" + len + ":" + base64;

                        var data = cmd + ":" + len + ":" + base64;
                        $.ajax({
                            type: "POST",
                            url: "../ivsctrl.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                default_ajax_handler(ajaxdata);
                                g_distinguish_type = distinguish_type;
                            },
                            dataType: "text"
                        });
                    }

                    function get_alarm_settings() {
                        get_alarm_drawmode(g_cur_channel);
                        if (g_device_type != 11) {
                            get_camhealthenable(g_cur_channel);
                        }
                        else {
                            get_platefiltermode();
                            get_distinguish_type();
                            get_trigger_type();
                            get_preinstall_province();
                        }
                    }

                    function set_alarm_settings() {
                        sfm_cur_obj = $(this);
                        set_alarm_drawmode(g_cur_channel);
                        if (g_device_type != 11) {
                            set_camhealthenable(g_cur_channel);
                        }
                        else {
                            set_platefiltermode();
                            set_distinguish_type();
                            set_trigger_type();
                            set_preinstall_province();
                        }
                    }

                    function init_channel() {
                        var option_html = "";
                        for (var i = 0; i < g_channelnum; i++) {
                            var channel_name = i + 1;
                            option_html += "<option value=\"" + i + "\">" + channel_name + "</option>";
                        }
                        $("#select_channel1").html(option_html);
                        init_selectmenu('#select_channel1', 110, 150, function (e, object) {
                            load_cur_channel(object.value);
                        });
                        if (g_channelnum == 1) {
                            $("#select_channel1").parent().parent().hide();
                        }
                    }


                    function load_cur_channel(channel) {
                        g_cur_channel = channel;
                        get_alarm_settings();
                    }
                    function replace_label_text(label, text_new) {
                        var text = $(label).html();
                        var regex = new RegExp($(label).text(), 'g');
                        text = text.replace(regex, text_new);
                        $(label).html(text);
                    }

                    function parse_config_info(json) {
                        var cfg;
                        try {
                            cfg = jQuery.parseJSON(json);
                        }
                        catch (e) {
                            //alert(e.message);
                            return null;
                        }
                        //set trigger delay
                        if (isNotUndefinedOrNull(cfg.trigger_delay)) {
                            $("#trigger_delay").val(cfg.trigger_delay);
                        } else {
                            $("#trigger_delay").val(0);
                        }
                    }
                    function get_trigger_type() {
                        $.get("../vb.htm?gettriggertype",
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            parse_config_info(ajaxdata.split("=")[1]);
                        });
                    }

                    function set_trigger_type() {
                        var cfg = {};
                        var arr = new Array();
                        cfg.trigger_delay = parseInt($("#trigger_delay").val(), 10);
                        if (isNaN(cfg.trigger_delay) || cfg.trigger_delay < 0 || cfg.trigger_delay > 10000) {
                            cfg.trigger_delay = 0;
                        }
                        arr = [];
                        $("[name='trigger_in']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.trigger_in = arr;
                        var jsonstr = JSON.stringify(cfg);

                        $.get("../vb.htm?settriggertype=" + jsonstr, function (ajaxdata) {
                            default_ajax_handler(ajaxdata);
                            get_trigger_type();
                        });
                    }

                    function get_preinstall_province() {
                        var cmd, len, data;

                        cmd = 65538;

                        data = "0";
                        len = 0;
                        var senddata = cmd + ":" + len + ":" + data;
                        $.ajax({
                            type: "POST",
                            url: "../getivsctrl2.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                if (precheck(ajaxdata)) {
                                    return false;
                                }
                                if ("OK" != ajaxdata.slice(0, 2)) return false;
                                var str = ajaxdata.slice(ajaxdata.indexOf("=") + 1, ajaxdata.length - 1);
                                str = str.split(":");
                                str = str[2];
                                str = Base64.decode(str, true);
                                var cur_province = str.split("@")[0];
                                var province_str = str.split("@")[1];
                                var arr = province_str.split("");
                                var option_str = "<option value='255'>无</option>";
                                for (var i = 0; i < arr.length; i++) {
                                    option_str += "<option value='" + i + "'>" + arr[i] + "</option>";
                                }
                                $("#preinstall_province").html(option_str);
                                $("#preinstall_province").selectmenu("refresh");
                                g_province = cur_province;
                                $("#preinstall_province").select_val(cur_province);
                            },
                            dataType: "text"
                        });
                    }

                    function set_preinstall_province() {
                        var cmd, len, data;

                        cmd = 65539;
                        var province = $("#preinstall_province").select_val();
                        if (g_province == province) {
                            return false;
                        }

                        len = 4;
                        var base64 = Base64.encode(province);
                        var senddata = cmd + ":" + len + ":" + province;
                        $.ajax({
                            type: "POST",
                            url: "../ivsctrl2.php",
                            data: senddata,
                            success: function (ajaxdata) {
                                default_ajax_handler(ajaxdata);
                            },
                            dataType: "text"
                        });
                    }

                    this.init = function () {
                        if (g_style_time == "sfm") {
                            //init
                            get_device_support_channels();
                            $("#black").attr("disabled", "disabled");
                            g_cur_channel = 0;
                            load_cur_channel(g_cur_channel);
                            $("#submit").click(set_alarm_settings);
                        } else {
                            $("#submit_ioconfig_tabs2").click(set_trigger_type);
                            get_trigger_type();
                        }
                    }
                }

                var white_list_import = new function () {
                    var g_cfg_table_cur = null;

                    //function select_comm_cfg_table_item(cur_tr) {
                    //    if (index < 0) return false;
                    //    index += 1;

                    //    var tr_item = $("#wl_tb tr");
                    //    if (tr_item.eq(index).length == 0) return false;
                    //    if (g_cfg_table_cur_index != null) {
                    //        g_cfg_table_cur_index.removeClass("ui-state-active");
                    //    }
                    //    tr_item.eq(index).addClass("ui-state-active");
                    //    g_cfg_table_cur_index = index;
                    //}

                    //分页显示
                    function page_viewer() {
                        var get_count_func;
                        var get_content_func;
                        var prefix;

                        var cur_page = null;
                        var max_page = null;
                        var max_count = null;
                        var max_inpage_num = null;

                        this.init = function (_get_content_func, _prefix) {
                            cur_page = null;
                            max_page = null;
                            max_count = null;
                            max_inpage_num = null;

                            get_content_func = _get_content_func;
                            prefix = _prefix;
                            //$("#" + prefix + "refresh").unbind("click");
                            $("#" + prefix + "page_goto_sub").unbind("click");
                            $("#" + prefix + "pre_page").unbind("click");
                            $("#" + prefix + "next_page").unbind("click");
                            $("#" + prefix + "page_start").unbind("click");
                            $("#" + prefix + "page_end").unbind("click");

                            //$("#" + prefix + "refresh").click(refresh);
                            $("#" + prefix + "page_goto_sub").click(goto_page);
                            $("#" + prefix + "pre_page").click(pre_page);
                            $("#" + prefix + "next_page").click(next_page);
                            $("#" + prefix + "page_start").click(page_start);
                            $("#" + prefix + "page_end").click(page_end);
                            max_inpage_num = 10;
                            refresh();
                        }

                        function show_page_hint() {
                            if (cur_page != null && max_count && !isNaN(max_page)) {
                                $("#" + prefix + "page_hint").html("第 " + cur_page + " / " + max_page + " 页 &nbsp; 共 " + max_count + " 条");
                            }
                        }

                        function refresh() {
                            $("#current_info_page_hint").html("");
                            get_content(true);
                        }

                        function get_content(refresh) {
                            if (refresh || cur_page == null) {
                                cur_page = 1;
                            }
                            get_content_func(function (_max_count) {
                                if (refresh || cur_page == null) {
                                    cur_page = 1;
                                }
                                max_count = _max_count;
                                max_page = Math.ceil(max_count / max_inpage_num);
                                if (max_page == -1) max_page = 0;
                                if (max_page == 0) {
                                    cur_page = 0;
                                }
                                show_page_hint();
                            }, (cur_page - 1) * max_inpage_num, (cur_page - 1) * max_inpage_num + max_inpage_num);
                        }

                        function next_page() {
                            if (cur_page != null && cur_page < max_page) {
                                cur_page++;
                                get_content(false);
                            }
                        }

                        function pre_page() {
                            if (cur_page != null && cur_page > 1) {
                                cur_page--;
                                get_content(false);
                            }
                        }

                        function page_start() {
                            if (cur_page != null && cur_page > 1) {
                                cur_page = 1;
                                get_content(false);
                            }
                        }

                        function page_end() {
                            if (cur_page != null && max_page > 1 && max_page != cur_page) {
                                cur_page = max_page;
                                get_content(false);
                            }
                        }

                        function goto_page() {
                            var page = parseInt($("#" + prefix + "page_goto").val());
                            if (isNaN(page) || page <= 0 || page > max_page) {
                                alert("请输入正确的页码！");
                                $("#" + prefix + "page_goto").val("");
                                return;
                            }
                            cur_page = page;
                            get_content(false);
                            $("#" + prefix + "page_goto").val("");
                        }
                    }

                    function dg_json_ajax(req, callback) {
                        //alert(JSON.stringify(req));
                        $.ajax({
                            type: "POST",
                            url: "../dgjson.php",
                            data: JSON.stringify(req),
                            success: function (data) {
                                //alert(data);
                                if (precheck(data)) return false;
                                callback(data);
                            },
                            dataType: "text"
                        });
                    }

                    //记录获取
                    function dg_json_ajax_record_handler() {
                        var type;
                        var count_type;
                        var begin_type;
                        var end_type;
                        var record_call_back;
                        var count_call_back;
                        var req_data_call_back;
                        this.init = function (_type, _count_type, _begin_type, _end_type, _record_call_back, _count_call_back, _req_data_call_back) {
                            type = _type;
                            count_type = _count_type;
                            begin_type = _begin_type;
                            end_type = _end_type;
                            record_call_back = _record_call_back;
                            count_call_back = _count_call_back;
                            req_data_call_back = _req_data_call_back;
                        }
                        this.get = function (call_back, record_begin, record_end) {
                            var req = {};
                            req.type = type;
                            req[begin_type] = record_begin;
                            req[end_type] = record_end;
                            if (req_data_call_back) req = req_data_call_back(req);
                            dg_json_ajax(req, function (data) {
                                var max_count = count_call_back(data);
                                call_back(max_count);
                                record_call_back(data);
                            });
                        }
                    }

                    function on_iframe_loaded() {
                        if (loaded) {
                            return;
                        }
                        loaded = true;
                        var r;
                        var error = false;
                        try {
                            r = getIFrameContent("hidden_frame");
                        }
                        catch (error) {
                            error = true;
                        }
                        if (r.match(/All upload success/)) {
                            $("#prompt_text").css("color", "Green");
                            $("#prompt_text").html("白名单导入成功！");
                        }
                        else {
                            $("#prompt_text").css("color", "Red");
                            $("#prompt_text").html("白名单导入失败,请检查文件是否正确，或尝试重新上传！");
                        }
                    }
                    this.init = function () {
                        var ie = checkIeVersion();
                        //ie8 will not send request when file input is hidden!
                        if (g_style_time == "old" || g_style_time == "hrzx" || (ie.isie && (ie.version < 10 || (ie.emulatedversion != null && ie.emulatedversion < 10)))) {
                            $("#file_input_btn").hide();
                            $("#file_name").hide();
                            $("#file_input").show();
                        }
                        $(".time_txt").css({ "width": "20px" });
                        $(".datepicker").css({"width":"100px"});
                        $("#file_input").change(function () {
                            fileChange(this);
                        });
                        $("#file_input_btn").click(function () {
                            $("#file_input").click();
                            var path = $("#file_input").val().split('\\').pop();
                            $("#file_name").html(path);
                        });
                        $("#frmUpload").submit(function () {
                            if (!$("#file_input").val()) {
                                alert("请先选择白名单！");
                                return false;
                            } else if (!iscrt) {
                                alert("请选择正确的白名单文件，格式为.csv");
                                return false;
                            }
                            else {
                                loaded = false;
                                $("#prompt_text").css("color", "Red");
                                $("#prompt_text").html("文件上传中，请稍后...");
                            }
                        });
                        $("#hidden_frame").on("load", on_iframe_loaded);
                        $("#export_white_list").css("width", "100px");
                        $("#clear_white_list").css("width", "100px");
                        $("#add_btn").click(function () {
                            $("#wl_dialog").show();
                        });
                        $("#wl_close").click(function () {
                            $("#wl_dialog").hide();
                        });
                        $("#wl_tb td").click(function () {
                            select_comm_cfg_table_item($(this).parent());
                        });
                    }
                }

                var special_plates = new function () {
                    function get_special_plates() {
                        var cfg = {};
                        cfg.type = "get_special_plates";
                        var jsonstr = JSON.stringify(cfg);
                        $.get("../vb.htm?getspesialplates="+jsonstr,
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            ajaxdata = ajaxdata.substring(ajaxdata.indexOf("=") + 1);
                            var jsondata = eval("(" + ajaxdata + ")");
                            if (jsondata.state == 200) {
                                var arr = jsondata.plates;
                                var str = "<tr>";
                                for (var i = 1; i <= arr.length; i++) {
                                    str += "<td style='min-width:200px;'><input type='checkbox' ";
                                    if (arr[i - 1].status == 1) {
                                        str += " checked='checked' "
                                    }
                                    str += " class='plate' index='" + arr[i - 1].index + "' id='plate" + arr[i - 1].index + "'/><label style='font-weight:normal;' for='plate" + arr[i - 1].index + "'>" + Base64.decode(arr[i - 1].name, true) + "</label></td>";
                                    if (i % 4 == 0 && arr.length != i) {
                                        str += "</tr><tr>"
                                    }
                                }
                                str += "</tr>";
                                $("#license_tb tr:gt(0)").remove();
                                $("#license_tb").append(str);
                                init_checkbox('input[type=checkbox]');
                            }
                        });
                    }

                    function set_special_plates() {
                        var cfg = {}
                        cfg.type = "set_special_plates";
                        var arr = [];
                        $(".plate").each(function () {
                            var json = {};
                            json.index = parseInt($(this).attr("index"));
                            json.status = $(this).check_val() ? 1 : 0;
                            arr.push(json);
                        })
                        cfg.plates = arr;

                        var jsonstr = JSON.stringify(cfg);
                        $.get("../vb.htm?getspesialplates=" + jsonstr, function (ajaxdata) {
                            ajaxdata = ajaxdata.substring(ajaxdata.indexOf("=") + 1);
                            var json = eval("(" + ajaxdata + ")");
                            if (json.state == 200) {
                                show_informer();
                            }
                            get_special_plates();
                        });
                    }

                    this.init = function () {
                        $("#submit_ioconfig_tabs8").click(set_special_plates);
                        get_special_plates();
                    }
                }
                
                var led_complensating = new function () {
                    function get_led_complensating() {
                        var cfg = {};
                        cfg.type = "get_led_complensating";
                        var jsonstr = JSON.stringify(cfg);
                        $.get("../vb.htm?ledcomplensating=" + jsonstr,
                        function (ajaxdata) {
                            if (precheck(ajaxdata)) {
                                return false;
                            }
                            ajaxdata = ajaxdata.substring(ajaxdata.indexOf("=") + 1);
                            var jsondata = eval("(" + ajaxdata + ")");
                            if (jsondata.state == 200) {
                                $("#comp_enable").check_val(jsondata.comp_enable == 1);
                                $("#ivt_time_txt").val(jsondata.ivt_time);
                                $("#dealy_time").val(jsondata.dealy_time);
                                $("#dealy_out_time").val(jsondata.dealy_out_time);
                                var io_in = jsondata.gpio_in;
                                for (var i = 0; i < io_in.length; i++) {
                                    $("[vzfilter='in'][vzio=" + io_in[i] + "]").check_val(true);
                                }
                                var io_out = jsondata.gpio_out;
                                for (var j = 0; j < io_out.length; j++) {
                                    $("[vzfilter='out'][vzio=" + io_out[j] + "]").check_val(true);
                                }
                            }
                        });
                    }
                    function set_led_complensating() {
                        var cfg = {}
                        cfg.type = "set_led_complensating";
                        var comp_enable = $("#comp_enable").check_val() ? 1 : 0;
                        var ivt_time = parseInt($("#ivt_time_txt").val());
                        var dealy_time = parseInt($("#dealy_time").val());
                        var dealy_out_time = parseInt($("#dealy_out_time").val());

                        if (isNaN(ivt_time) || ivt_time < 0 || ivt_time > 65535) {
                            alert("触发延迟时间为0-65535的整数");
                            return;
                        }
                        if (isNaN(dealy_time) || dealy_time < 0 || dealy_time > 65535) {
                            alert("爆闪持续时间为0-65535的整数");
                            return;
                        }
                        if (isNaN(dealy_out_time) || dealy_out_time < 0 || dealy_out_time > 65535) {
                            alert("爆闪延迟时间为0-65535的整数");
                            return;
                        }
                        cfg.comp_enable = comp_enable;
                        cfg.ivt_time = ivt_time;
                        cfg.dealy_time = dealy_time;
                        cfg.dealy_out_time = dealy_out_time;

                        var arr = new Array();

                        arr = [];
                        $("[vzfilter='in']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.gpio_in = arr;

                        arr = [];
                        $("[vzfilter='out']").filter(function (index) {
                            if ($(this).check_val()) {
                                arr.push(parseInt($(this).attr('vzio')));
                            }
                            return true;
                        });
                        cfg.gpio_out = arr;

                        var jsonstr = JSON.stringify(cfg);
                        $.get("../vb.htm?ledcomplensating=" + jsonstr, function (ajaxdata) {
                            ajaxdata = ajaxdata.substring(ajaxdata.indexOf("=") + 1);
                            var json = eval("(" + ajaxdata + ")");
                            if (json.state == 200) {
                                show_informer();
                            }
                            get_led_complensating();
                        });
                    }
                    this.init = function () {
                        get_led_complensating();
                        $("#led_complensating_submit").click(set_led_complensating);
                    }
                }
                $(function () {
                    if (g_style_time == "sfm") {
                        $("#li_for_tabs-1").remove();
                        $("#li_for_tabs-2").remove();
                        $("#li_for_tabs-3").remove();
                        $("#li_for_tabs-4").remove();
                        $("#li_for_tabs-5").remove();
                        $("#tabs-1").remove();
                        $("#tabs-2").remove();
                        $("#tabs-3").remove();
                        $("#tabs-4").remove();
                        $("#tabs-5").remove();
                        $("#tabs-6 table").css({"font-size":"14px"});
                    } else {
                        $("#li_for_tabs-1-s").remove();
                        $("#li_for_tabs-2-s").remove();
                        $("#li_for_tabs-3-s").remove();
                        $("#li_for_tabs-4-s").remove();
                        $("#tabs-1-s").remove();
                        $("#tabs-2-s").remove();
                        $("#tabs-3-s").remove();
                        $("#tabs-4-s").remove();
                    }
                    if (g_cur_style == "blue") {
                        $("a[href='#tabs-1']").html("输入输出联动");
                        $("#li_for_tabs-3").remove();
                        $("#li_for_tabs-4").remove();
                        $("#tabs-3").remove();
                        $("#tabs-4").remove();
                        $("#IO_3").css("display","none");

                    }

                    if (g_style_time == "old") {
                        if (parent.cur_old_obj == "serial") {
                            $("#io_tabs>ul>li:not(#li_for_tabs-5,#li_for_tabs-6)").remove();
                            $("#io_tabs>div:not(#tabs-5,#tabs-6)").remove();
                        } else if (parent.cur_old_obj == "linkage") {
                            $("#io_tabs>ul>li:not(#li_for_tabs-1,#li_for_tabs-2,#li_for_tabs-8,#li_for_tabs-9)").remove();
                            $("#io_tabs>div:not(#tabs-1,#tabs-2,#tabs-8,#tabs-9)").remove();
                        }else if (parent.cur_old_obj == "whitelist") {
                            $("#io_tabs>ul>li:not(#li_for_tabs-3,#li_for_tabs-4)").remove();
                            $("#io_tabs>div:not(#tabs-3,#tabs-4)").remove();
                        }
                    }
                    create_tabs("#io_tabs"); 
                    init_selectmenu("select:not(.time_select,#cur_channel_1)", 130, 150);
                    init_selectmenu("#wl_licence_type", 150, 150);
                    init_selectmenu("#wl_licence_color", 150, 150);

                    if (g_style_time == "sfm") {
                        $("#tabs-6 input[type='submit']").css({ "width": "70px", "padding": "5px" });
                    }
                    trigger_output_tab.init();
                    get_device_type();
                    alarm_show_page.init();
                    uart_tab_s.init();
                    white_list_check_method_tab_s.init();
                    serial_out_tab.init();
                    //white_list_import.init();
                    special_plates.init();
                    led_complensating.init();
                });
            });
        });
    </script>
</head>
<body>
    <div id="dbg_info">
    </div>
    <div id="io_tabs" style="min-width: 960px;overflow:hidden">
        <ul id="io_ul">
            <li id="li_for_tabs-1-s"><a href="#tabs-1-s">输入输出配置</a></li>
            <li id="li_for_tabs-2-s"><a href=" #tabs-2-s">识别参数</a></li>
            <li id="li_for_tabs-3-s"><a href="#tabs-3-s">串口参数</a></li>
            <li id="li_for_tabs-4-s"><a href="#tabs-4-s">白名单参数</a></li>

            <li id="li_for_tabs-1"><a href="#tabs-1">输出配置</a></li>
            <!--<li id="li_for_tabs-2"><a href="#tabs-2">车牌识别触发延迟</a></li>-->
            <li id="li_for_tabs-8"><a href="#tabs-8">特殊车牌</a></li>
            <li id="li_for_tabs-9"><a href="#tabs-9">爆闪控制</a></li>
            <li id="li_for_tabs-3"><a href="#tabs-3">白名单验证</a></li>
            <li id="li_for_tabs-4"><a href="#tabs-4">白名单模糊匹配</a></li>
            <li id="li_for_tabs-7" style="display:none;"><a href="#tabs-7">白名单数据</a></li>
            <li id="li_for_tabs-5"><a href="#tabs-5">串口参数</a></li>
            <li id="li_for_tabs-6"><a href="#tabs-6">串口推送配置</a></li>
        </ul>
        <div id="tabs-1-s">
            <table>
                <tr>
                    <td>
                        <table class="ui-widget ui-widget-content realtable" border="1" cellspacing="0" cellpadding="0"
                               style="margin-top: 10px; min-width: 200px; font-size:14px;"
                               id="cfgtable">
                            <tr>
                                <td width="113"></td>
                                <td width="113"></td>
                                <td style='padding: 10pt 5.4pt 10pt 5.4pt'>
                                    开关量输出 1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量输出 2
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_150">
                                    开关量输出 3
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_171">
                                    开关量输出 4
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    RS485-1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    RS485-2
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_177">
                                    电平输出 1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_173">
                                    电平输出 2
                                </td>
                                <td width="47" style='width: 35.45pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    音频
                                </td>
                            </tr>
                            <tr>
                                <td width="113" rowspan="4" style='width: 84.8pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    信号输出
                                </td>
                                <td width="113" style='width: 84.8pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    <p>
                                        白名单内
                                    </p>
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    <p>
                                        白名单外
                                    </p>
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    无车牌
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    黑名单
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认</option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" rowspan="3" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    信号输入
                                </td>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平1
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="171" ioname="OUT6" />
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平2
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="171" ioname="OUT6" />
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="ext_ioctl3_tr">
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平3
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="171" ioname="OUT6" />
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>

                        </table>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td style="text-align: center;border:none;">
                        <input id="submit_ioconfig_tabs1" type="submit" value="确定" />
                    </td>
                </tr>
                <tr>
                    <td style="display:none;padding:10px;" align="center" class="sfm_info"></td>
                </tr>
            </table>
        </div>
        <div id="tabs-2-s">
            <table class="dummy realtable paddingtb" border="0" style="margin-top: 10px; margin-left: 30px">
                <tr>
                    <td id="alarm_show_name">
                        实时显示
                    </td>
                    <td style="min-width:130px">
                        <input type="checkbox" id="drawtarget" />
                        <label id="drawtarget_name" for="drawtarget">实时结果</label>
                    </td>
                    <td style="min-width:130px">
                        <input type="checkbox" id="drawTrajectory" />
                        <label id="drawTrajectory_name" for="drawTrajectory">车牌位置</label>
                    </td>
                    <td style="min-width:130px" colspan="3">
                        <input type="checkbox" id="drawrule" />
                        <label id="drawrule_name" for="drawrule">虚拟线圈和识别规则</label>
                    </td>
                </tr>
                <tr id="plate_show_result_type_tr">
                    <td>
                        输出结果
                    </td>
                    <td>
                        <input type="checkbox" id="stable" />
                        <label for="stable">稳定识别触发</label>
                    </td>
                    <td>
                        <input type="checkbox" id="vloop" />
                        <label for="vloop">虚拟线圈触发</label>
                    </td>
                    <td style="min-width:130px">
                        <input type="checkbox" id="out_io1" />
                        <label for="out_io1">IO输入1触发</label>
                    </td>
                    <td style="min-width:130px">
                        <input type="checkbox" id="out_io2" />
                        <label for="out_io2">IO输入2触发</label>
                    </td>
                    <td style="min-width:130px">
                        <input type="checkbox" id="out_io3" />
                        <label for="out_io3">IO输入3触发</label>
                    </td>
                </tr>
                <tr id="plate_distinguish_type_tr0">
                    <td rowspan="2" style="min-width:70px">
                        识别类型
                    </td>
                    <td>
                        <input type="checkbox" id="blue" />
                        <label for="blue">蓝牌</label>
                    </td>
                    <td>
                        <input type="checkbox" id="yellow" />
                        <label for="yellow">黄牌</label>
                    </td>
                    <td>
                        <input type="checkbox" id="army" />
                        <label for="army">军牌</label>
                    </td>
                    <td style="min-width:100px;">
                        <input type="checkbox" id="police" />
                        <label for="police">警牌</label>
                    </td>
                    <td>
                        <input type="checkbox" id="armpol" />
                        <label for="armpol">武警</label>
                    </td>
                </tr>
                <tr id="plate_distinguish_type_tr1">
                    <td>
                        <input type="checkbox" id="coach" />
                        <label for="coach">教练</label>
                    </td>
                    <td>
                        <input type="checkbox" id="hongkongmacao" />
                        <label for="hongkongmacao">港澳</label>
                    </td>
                    <td>
                        <input type="checkbox" id="embassy" />
                        <label for="embassy">使领馆</label>
                    </td>
                    <td colspan="2">
                        <input type="checkbox" id="black" />
                        <label for="black">黑牌</label>
                    </td>
                </tr>
                <tr>
                    <td style="border:none;">触发延迟：</td>
                    <td colspan="5" style="border:none;">
                        <input id="trigger_delay" size="3" maxlength="4" />毫秒 &nbsp;&nbsp;&nbsp; 说明：仅延迟外部触发时的车牌识别结果输出时间
                    </td>
                </tr>
                <tr>
                    <td style="border:none;">预设省份：</td>
                    <td colspan="5" style="border:none;">
                        <select id="preinstall_province"></select>
                    </td>
                </tr>
                <tr>
                    <td align="center" colspan="6" style="padding-top:20px;border:none">
                        <input id="submit" type="submit" value="确定" />
                    </td>
                </tr>
                <tr>
                    <td style="display:none;border:none;" colspan="6" align="center" class="sfm_info"></td>
                </tr>
            </table>
        </div>
        <div id="tabs-3-s">
            <table class="dummy realtable" border="0" style="margin-top: 10px; margin-left: 30px; min-width: 200px;">
                <tr>
                    <td style="min-width: 90px"></td>
                    <td align="center" style="min-width: 200px">
                        串口1
                    </td>
                    <td align="center" style="min-width: 150px">
                        串口2
                    </td>
                </tr>
                <tr>
                    <td>
                        波特率
                    </td>
                    <td>
                        <select id="ptz_baudrate0" style="width: 3em">
                            <option value="2400">2400</option>
                            <option value="4800">4800</option>
                            <option value="9600">9600</option>
                            <option value="19200">19200</option>
                            <option value="38400">38400</option>
                            <option value="57600">57600</option>
                            <option value="115200">115200</option>
                        </select>
                    </td>
                    <td>
                        <select id="ptz_baudrate1" style="width: 3em">
                            <option value="2400">2400</option>
                            <option value="4800">4800</option>
                            <option value="9600">9600</option>
                            <option value="19200">19200</option>
                            <option value="38400">38400</option>
                            <option value="57600">57600</option>
                            <option value="115200">115200</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        效验位
                    </td>
                    <td>
                        <select id="ptz_parity0" style="width: 3em">
                            <option value="0">无校验</option>
                            <option value="1">奇校验</option>
                            <option value="2">偶校验</option>
                        </select>
                    </td>
                    <td>
                        <select id="ptz_parity1" style="width: 3em">
                            <option value="0">无校验</option>
                            <option value="1">奇校验</option>
                            <option value="2">偶校验</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        停止位
                    </td>
                    <td>
                        <select id="ptz_stopbit0" style="width: 3em">
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </td>
                    <td>
                        <select id="ptz_stopbit1" style="width: 3em">
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        数据位
                    </td>
                    <td>
                        <select id="ptz_databits0" style="width: 3em">
                            <!--<option value="7">7</option>-->
                            <option value="8">8</option>
                        </select>
                    </td>
                    <td>
                        <select id="ptz_databits1" style="width: 3em">
                            <!--<option value="7">7</option>-->
                            <option value="8">8</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="right" colspan="3" style="padding-top:30px;border:none;">
                        <input id="uart_submit" type="submit" value="确定" />
                    </td>
                </tr>
                <tr>
                    <td style="display:none;border:none;padding-right:20px;" colspan="4" align="right" class="sfm_info"></td>
                </tr>
            </table>
        </div>
        <div id="tabs-4-s">
            <table class="dummy realtable paddingtb" border="0" style="margin-top: 10px; margin-left: 30px; min-width: 200px;">
                <tr>
                    <td>
                        <label>白名单启用条件</label>
                    </td>
                    <td>
                        <input type="radio" name="whitelist_en" id="whitelist_auto" /><label for="whitelist_auto">脱机自动启用</label>
                    </td>
                    <td>
                        <input type="radio" name="whitelist_en" id="whitelist_enable" /><label for="whitelist_enable">启用</label>
                    </td>
                    <td colspan="2">
                        <input type="radio" name="whitelist_en" id="whitelist_disable" /><label for="whitelist_disable">不启用</label>
                    </td>
                </tr>
                <tr style="padding-top:20px;">
                    <td rowspan="2">
                        <label>模糊查询方式</label>
                    </td>
                    <td colspan="3">
                        <input type="radio" name="fuzzy_query_type" id="fuzzy_accurate" />
                        <label for="fuzzy_accurate">&nbsp;精确匹配&nbsp;(车牌号完全匹配)</label>
                    </td>
                    <td>
                        <input type="radio" name="fuzzy_query_type" id="fuzzy_normal_cc" />
                        <label for="fuzzy_normal_cc">&nbsp;普通字符模糊匹配&nbsp;</label>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <input type="radio" name="fuzzy_query_type" id="fuzzy_similar_cc" />
                        <label for="fuzzy_similar_cc">&nbsp;相似字符匹配(包括:0-D,8-B,0-Q,E-F)</label>
                    </td>
                    <td>
                        <input id="fuzzy_ignore_cc" type="checkbox" />
                        <label for="fuzzy_ignore_cc">忽略车牌汉字</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label> 允许误识别长度</label>
                    </td>
                    <td colspan="4">
                        <ul id="lb_algin">
                            <li style="float: left; list-style: none;display:none;">
                                <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_0" />
                                <label for="fuzzy_query_len_0"></label>
                            </li>
                            <li style="float: left; list-style: none;">
                                <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_1" />
                                <label for="fuzzy_query_len_1">1位&nbsp;&nbsp;</label>
                            </li>
                            <li style="float: left; list-style: none;">
                                <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_2" />
                                <label for="fuzzy_query_len_2">2位&nbsp;&nbsp;</label>
                            </li>
                            <li style="float: left; list-style: none;">
                                <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_3" />
                                <label for="fuzzy_query_len_3">3位&nbsp;&nbsp;</label>
                            </li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td colspan="5" align="center" style="border:none;padding-top:20px;">
                        <input id="submit_ioconfig_tabs3_sfm" type="submit" value="确定" />
                    </td>
                </tr>
                <tr>
                    <td style="display:none;border:none;" colspan="5" align="center" class="sfm_info"></td>
                </tr>
            </table>
        </div>

        <div id="tabs-1">
            <table>
                <tr>
                    <td>
                        <table class="ui-widget ui-widget-content realtable" border="1" cellspacing="0" cellpadding="0"
                               style="margin-top: 10px; margin-left: 50px; min-width: 200px; font-size:12px;"
                               id="cfgtable">
                            <tr class="ui-widget-header">
                                <td width="113" rowspan="2" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    触发输入
                                </td>
                                <td width="113" rowspan="2" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    <!--<a href="#tabs-3" id="gotowhitelist">白名单验证</a>-->
                                    白名单验证
                                </td>
                                <td class="head_td" colspan="9" style="text-align:center">
                                    输出端口
                                </td>
                            </tr>
                            <tr>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量输出 1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量输出 2
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_150">
                                    开关量输出 3
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_171">
                                    开关量输出 4
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_177">
                                    电平输出 1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt' class="td_173">
                                    电平输出 2
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    RS485-1
                                </td>
                                <td style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    RS485-2
                                </td>
                                <td width="47" style='width: 35.45pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    音频
                                </td>
                            </tr>
                            <tr>
                                <td width="113" rowspan="5" style='width: 84.8pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    车牌识别触发
                                </td>
                                <td width="113" style='width: 84.8pt; padding: 0cm 5.4pt 0cm 5.4pt'>
                                    <p>
                                        通过
                                    </p>
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="whitelist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    <p>
                                        不通过
                                    </p>
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="not_whitelist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    无车牌
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="no_licence" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    黑名单
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="blacklist" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认</option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    特殊车牌
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="1485" ioname="485" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="special_plates" vzio="2485" ioname="485" />
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认</option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平输入 1
                                </td>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    无
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl1" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平输入 2
                                </td>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    无
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl2" vzio="173" ioname="OUT4" />
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="ext_ioctl3_tr">
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    开关量/电平输入 3
                                </td>
                                <td width="113" style='padding: 0cm 5.4pt 0cm 5.4pt'>
                                    无
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="56" ioname="OUT1" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="40" ioname="OUT2" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="150" ioname="OUT5" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="171" ioname="OUT6" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="177" ioname="OUT3" />
                                </td>
                                <td>
                                    <input type='checkbox' usedfor='vzcfg' vzfilter="ext_ioctl3" vzio="173" ioname="OUT4" />
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <select disabled="disabled">
                                        <option value="audio0">默认 </option>
                                        <option value="audio1">音频1</option>
                                        <option value="audio2">音频2</option>
                                        <option value="audio3">音频3</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td style="text-align: right">
                        <input id="submit_ioconfig_tabs1" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <!--<div id="tabs-2">
            <table>
                <tr>
                    <td>
                        <table class="dummy" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 200px;">
                            <tr>
                                <td>
                                    触发延迟：
                                    <input id="trigger_delay" size="3" maxlength="4" />毫秒&nbsp;
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    说明：仅延迟外部触发时的车牌识别结果输出时间
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td style="text-align: right">
                        <input id="submit_ioconfig_tabs2" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>-->
        <div id="tabs-3">
            <table>
                <tr>
                    <td>
                        <table class="dummy" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 200px;">
                            <tr>
                                <td>
                                    <label>白名单启用条件：</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="whitelist_en" id="whitelist_auto" /><label for="whitelist_auto">脱机自动启用</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="whitelist_en" id="whitelist_enable" /><label for="whitelist_enable">启用</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="whitelist_en" id="whitelist_disable" /><label for="whitelist_disable">不启用</label>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right">
                        <input id="submit_ioconfig_tabs3" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-4">
            <table>
                <tr>
                    <td>
                        <table class="dummy" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 400px;">
                            <tr>
                                <td style="min-width:300px">
                                    <label>模糊查询方式：</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="fuzzy_query_type" id="fuzzy_accurate" />
                                    <label for="fuzzy_accurate">&nbsp;精确匹配&nbsp;(车牌号完全匹配)</label>
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="fuzzy_query_type" id="fuzzy_similar_cc" />
                                    <label for="fuzzy_similar_cc">&nbsp;相似字符匹配(包括:0-D,8-B,0-Q,E-F)</label>
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" name="fuzzy_query_type" id="fuzzy_normal_cc" />
                                    <label for="fuzzy_normal_cc">&nbsp;普通字符模糊匹配&nbsp;</label>
                                </td>
                                <td>
                                    <ul id="lb_algin">
                                        <li style="float: left; list-style: none;">
                                            允许误识别长度:&nbsp;&nbsp;&nbsp;
                                        </li>
                                        <li style="float: left; list-style: none;display:none;">
                                            <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_0" />
                                            <label for="fuzzy_query_len_0"></label>
                                        </li>
                                        <li style="float: left; list-style: none;">
                                            <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_1" />
                                            <label for="fuzzy_query_len_1">1&nbsp;&nbsp;</label>
                                        </li>
                                        <li style="float: left; list-style: none;">
                                            <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_2" />
                                            <label for="fuzzy_query_len_2">2&nbsp;&nbsp;</label>
                                        </li>
                                        <li style="float: left; list-style: none;">
                                            <input type="radio" name="fuzzy_query_len" id="fuzzy_query_len_3" />
                                            <label for="fuzzy_query_len_3">3&nbsp;&nbsp;</label>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input id="fuzzy_ignore_cc" type="checkbox" />
                                    <label for="fuzzy_ignore_cc">&nbsp;忽略汉字</label>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right">
                        <input id="submit_ioconfig_tabs4" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-8">
            <table>
                <tr>
                    <td>
                        <table class="dummy" id="license_tb" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 400px;">
                            <tr>
                                <td style="min-width:300px" colspan="4">
                                    <label>特殊车牌：</label>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td style="text-align: right">
                        <input id="submit_ioconfig_tabs8" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-9">
            <table>
                <tr>
                    <td>
                        <table class="dummy" id="led_complensating_tb" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 400px;">
                            <tr>
                                <td style="min-width:100px">
                                    爆闪灯
                                </td>
                                <td>
                                    <input type="checkbox" id="comp_enable" /><label for="comp_enable">开启</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    触发延迟时间
                                </td>
                                <td>
                                    <input type="text" class="text" id="ivt_time_txt" maxlength="5" style="width:50px;" />&nbsp;&nbsp;毫秒
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    爆闪持续时间
                                </td>
                                <td>
                                    <input type="text" class="text" id="dealy_time" maxlength="5" style="width:50px;" />&nbsp;&nbsp;毫秒
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    爆闪延迟时间
                                </td>
                                <td>
                                    <input type="text" class="text" id="dealy_out_time" maxlength="5" style="width:50px;" />&nbsp;&nbsp;毫秒
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    地感输入口
                                </td>
                                <td>
                                    <ul style="list-style:none">
                                        <li style="width:140px;float:left;" id="li-io-in1">
                                            <input type="checkbox" id="io-in1" vzio="0" vzfilter='in' /><label for="io-in1">开关量/电平输入1</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-in2">
                                            <input type="checkbox" id="io-in2" vzio="1" vzfilter='in' /><label for="io-in2">开关量/电平输入2</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-in3">
                                            <input type="checkbox" id="io-in3" vzio="2" vzfilter='in' /><label for="io-in3">开关量/电平输入3</label>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    爆闪控制口
                                </td>
                                <td>
                                    <ul style="list-style:none">
                                        <li style="width:140px;float:left;" id="li-io-out1">
                                            <input type="checkbox" id="io-out1" vzio="56" vzfilter='out' /><label for="io-out1">开关量输出1</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-out2">
                                            <input type="checkbox" id="io-out2" vzio="40" vzfilter='out' /><label for="io-out2">开关量输出2</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-out3">
                                            <input type="checkbox" id="io-out3" vzio="150" vzfilter='out' /><label for="io-out3">开关量输出3</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-out4">
                                            <input type="checkbox" id="io-out4" vzio="171" vzfilter='out' /><label for="io-out4">开关量输出4</label>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <ul style="list-style:none">
                                        <li style="width:140px;float:left;" id="li-io-out5">
                                            <input type="checkbox" id="io-out5" vzio="177" vzfilter='out' /><label for="io-out5">电平输出1</label>
                                        </li>
                                        <li style="width:140px;float:left;" id="li-io-out6">
                                            <input type="checkbox" id="io-out6" vzio="173" vzfilter='out' /><label for="io-out6">电平输出2</label>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td style="text-align: right">
                        <input id="led_complensating_submit" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-7" style="display:none;">
            <table>
                <tr>
                    <td style="min-width:100px;">
                        选择本地文件
                    </td>
                    <td>
                        <form id="frmUpload" method="post" enctype="multipart/form-data" action="../cgi-bin/upload.cgi" target="hidden_frame">
                            <div id="file_name" style="width:160px;max-width:160px;display:inline-block"></div>
                            <input id="file_input_btn" type="submit" value="浏览" />
                            <input id="file_input" type="file" name="file" style="display:none;height:20px;width:240px;" accept=".csv" />
                            <input type="submit" id="upload" value="导入" />
                        </form>
                    </td>
                </tr>
                <tr>
                    <td>
                        导入进度
                    </td>
                    <td>
                        已导入<label>0</label>条、共<label>0</label>条&nbsp;<a href="#" style="color:blue;text-decoration:solid;">查看详情</a>
                    </td>
                </tr>
            </table>
            <table style="margin-top:50px;">
                <tr>
                    <td style="min-width:150px;">
                        输入车牌号码
                    </td>
                    <td>
                        <input type="text" />
                    </td>
                    <td>
                        <input type="submit" value="搜索" />
                    </td>
                    <td style="min-width:200px;"></td>
                    <td style="min-width:100px;">
                        <input id="add_btn" type="submit" value="手动添加" />
                    </td>
                    <td style="min-width:100px;">
                        <input type="submit" value="修改" />
                    </td>
                    <td style="min-width:100px;">
                        <input type="submit" value="删除" />
                    </td>
                </tr>
            </table>
            <table class="dummy ui-widget ui-widget-content realtable" id="wl_tb" style="min-width:900px;">
                <tr class="ui-widget-header">
                    <th>客户名称</th>
                    <th>车牌号码</th>
                    <th>车辆类型</th>
                    <th>是否启用</th>
                    <th>开始日期</th>
                    <th>过期日期</th>
                    <th>启用时间段</th>
                    <th>周期时间段</th>
                    <th>黑名单</th>
                </tr>
            </table>
            <table>
                <tr>
                    <td>
                        <input id="whitelist_page_start" type="submit" value="首页" />
                    </td>
                    <td>
                        <input id="whitelist_pre_page" type="submit" value="上页" />
                    </td>
                    <td>
                        <input id="whitelist_next_page" type="submit" value="下页" />
                    </td>
                    <td>
                        <input id="whitelist_page_end" type="submit" value="末页" />
                    </td>
                    <td id="whitelist_page_hint" style="min-width:60px; font-size:0.9em"></td>
                    <td>
                        <input id="whitelist_page_goto" type="text" size="5" />
                    </td>
                    <td>
                        <input id="whitelist_page_goto_sub" type="submit" value="跳转" />
                    </td>
                    <td style="min-width:100px;"></td>
                    <td style="min-width:100px;">
                        <input id="export_whitelist" type="submit" value="导出白名单" />
                    </td>
                    <td style="min-width:100px;" align="right">
                        <input id="clear_whitelist" type="submit" value="清空白名单" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-5">
            <table class="dummy" border="0" style="margin-top: 10px; margin-left: 50px; min-width: 200px;">
                <tr>
                    <td style="min-width: 90px">
                        串口号
                    </td>
                    <td>
                        <select id="cur_channel_1" style="width: 3em"></select>
                    </td>
                </tr>
                <tr>
                    <td>
                        波特率
                    </td>
                    <td>
                        <select id="ptz_baudrate" style="width: 3em">
                            <option value="2400">2400</option>
                            <option value="4800">4800</option>
                            <option value="9600">9600</option>
                            <option value="19200">19200</option>
                            <option value="38400">38400</option>
                            <option value="57600">57600</option>
                            <option value="115200">115200</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        效验位
                    </td>
                    <td>
                        <select id="ptz_parity" style="width: 3em">
                            <option value="0">无校验</option>
                            <option value="1">奇校验</option>
                            <option value="2">偶校验</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        停止位
                    </td>
                    <td>
                        <select id="ptz_stopbit" style="width: 3em">
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        数据位
                    </td>
                    <td>
                        <select id="ptz_databits" style="width: 3em">
                            <!--<option value="7">7</option>-->
                            <option value="8">8</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="right" colspan="4">
                        <input id="uart_submit" type="submit" value="确定" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="tabs-6">
            <table style="margin-top:10px;margin-left:30px;">
                <tr>
                    <td valign="top"> 
                        <table class="ui-widget ui-widget-content realtable" border=1 cellspacing=0 cellpadding=0
                               style="margin-top: 5px; margin-left: 10px;min-width:200px; font-size:12px;width:580px" id="comm_cfg_tbl">

                            <tr class="ui-widget-header">
                                <td>选择</td>
                                <td>字段名称</td>
                                <td>格式</td>
                                <td>说明</td>
                            </tr>
                            <!--<tr id="tr_header">
                            <td></td>
                            <td>标志头</td>
                            <td><input type="text" id="comm_header_fmt"/></td>
                            <td>16进制数值(最多4个字节)如：A588</td>
                            </tr>-->
                            <tr id="tr_enable">
                                <td><input type="checkbox" name="有无车牌" usedfor="comm_cfg" id="comm_enable" dmvalue="AA" /></td>
                                <td>有无车牌</td>
                                <td>1个字节</td>
                                <td>0xAA为可识别，0xBB为不可识别</td>
                            </tr>
                            <tr id="tr_license">
                                <td><input type="checkbox" name="车牌号" usedfor="comm_cfg" id="comm_license" dmvalue="00413132333435" /></td>
                                <td>车牌号</td>
                                <td>7个字节</td>
                                <td>汉字编码参考文档，普通字符为ASCII</td>
                            </tr>
                            <tr id="tr_licensecolor">
                                <td><input type="checkbox" name="车牌颜色" usedfor="comm_cfg" id="comm_licensecolor" dmvalue="00" /></td>
                                <td>车牌颜色</td>
                                <td>1个字节</td>
                                <td>00蓝色 01黄色 02黑色 03白色 04其他备用</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="车牌类型" usedfor="comm_cfg" id="comm_licensetype" dmvalue="00" /></td>
                                <td>车牌类型</td>
                                <td>1个字节</td>
                                <td>0:未知车牌,1:蓝牌小汽车,2:黑牌小汽车,详细参看文档</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="可信度" usedfor="comm_cfg" id="comm_confidence" dmvalue="63" /></td>
                                <td>可信度</td>
                                <td>1个字节</td>
                                <td>最多分数100</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="运动方向" usedfor="comm_cfg" id="comm_direction" dmvalue="00" /></td>
                                <td>运动方向</td>
                                <td>1个字节</td>
                                <td>0：无，1：左，2：右，3：上，4：下</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="车牌区域" usedfor="comm_cfg" id="comm_rect" dmvalue="9700320020018000" /></td>
                                <td>车牌区域</td>
                                <td>8个字节</td>
                                <td>包括左上角坐标和长宽,4个2字节整数</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="触发类型" usedfor="comm_cfg" id="comm_trigger" dmvalue="00" /></td>
                                <td>触发类型</td>
                                <td>1个字节</td>
                                <td>1:自动,2:外部,4:软件,8:虚拟地感线圈</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="车辆颜色" usedfor="comm_cfg" id="comm_carcolor" dmvalue="00" /></td>
                                <td>车辆颜色</td>
                                <td>1个字节</td>
                                <td>00蓝色 01黄色 02黑色 03白色 04其他备用</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="识别时间" usedfor="comm_cfg" id="comm_time" dmvalue="72D25E55" /></td>
                                <td>识别时间</td>
                                <td><select id="comm_time_fmt"><option value="0">4字节（时间戳）</option><option value="1"><span style="white-space:nowrap;">7字节(YYYYMMDDHHmmss)</span></option><option value="2">6字节(YYMMDDHHmmss)</option><option value="3">7字节(HHmmssDDMMYYYY)</option><option value="4">6字节(HHmmssDDMMYY)</option><option value="5">4字节(YYYYMMDD)</option><option value="6">3字节(YYMMDD)</option><option value="7">8字节(时间戳:毫秒)</option></select></td>
                                <td>车牌识别发生的时间</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="白名单过期时间" usedfor="comm_cfg" id="comm_duetime" dmvalue="72D25E55" /></td>
                                <td>白名单过期时间</td>
                                <td><select id="comm_duetime_fmt"><option value="0">4字节（时间戳）</option><option value="1">7字节(YYYYMMDDHHmmss)</option><option value="2">6字节(YYMMDDHHmmss)</option><option value="3">7字节(HHmmssDDMMYYYY)</option><option value="4">6字节(HHmmssDDMMYY)</option><option value="5">4字节(YYYYMMDD)</option><option value="6">3字节(YYMMDD)</option></select></td>
                                <td>白名单的过期时间</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="白名单验证结果" usedfor="comm_cfg" id="comm_wlresult" dmvalue="00" /></td>
                                <td>白名单验证结果</td>
                                <td>1个字节</td>
                                <td>01验证通过 03无车牌 04黑名单 其它情况</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="输出IO" usedfor="comm_cfg" id="comm_out" dmvalue="00" /></td>
                                <td>输出IO</td>
                                <td>1个字节</td>
                                <td>00:OUT1 01:OUT2 02:OUT3 03:OUT4</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="序列号" usedfor="comm_cfg" id="comm_sn" dmvalue="A8B04051C1E6F883" /></td>
                                <td>序列号</td>
                                <td>8个字节</td>
                                <td>xxxx-xxxx</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="密文" usedfor="comm_cfg" id="comm_ciphertext" dmvalue="0102030405060708090A0B0C0D0E0F10" /></td>
                                <td>密文</td>
                                <td>16字节</td>
                                <td>截取密文前16字节，不足补0</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name="识别记录id" usedfor="comm_cfg" id="comm_id" dmvalue="08080000" /></td>
                                <td>识别记录id</td>
                                <td>4个字节</td>
                                <td>保存的识别记录</td>
                            </tr>
                            <tr>
                                <td style="width:50px;">示例：</td>
                                <td colspan="3" id="demodisplay" style="width:510px;word-wrap:break-word;word-break:break-all;z-index:0;"></td>
                            </tr>
                        </table>
                    </td>
                    <td valign="top">
                        <table style="width:90%;border:none;margin-top: 10px; margin-left: 50px;min-width:200px; font-size:12px;">
                            <tr><td colspan="2">通用配置</td></tr>
                            <tr>
                                <td>标志头</td>
                                <td><input type="text" id="comm_header_fmt" style="width:125px" /></td>
                            </tr>
                            <tr>
                                <td>标志尾</td>
                                <td><input type="text" id="comm_end_fmt" style="width:125px" /></td>
                            </tr>
                            <tr>
                                <td>校验起始位</td>
                                <td>
                                    <select id="comm_checkbegin_fmt"></select>
                                </td>
                            </tr>
                            <tr>
                                <td>校验结束位</td>
                                <td>
                                    <select id="comm_checkend_fmt"></select>
                                </td>
                            </tr>
                            <tr>
                                <td>校验位</td>
                                <td><select id="comm_checksum_fmt"><option value="xor">异或</option><option value="sum">和校验</option><option value="none">无校验</option></select></td>
                            </tr>
                            <tr>
                                <td>大小端</td>
                                <td><select id="comm_edian_fmt"><option value="little">小端</option><option value="big">大端</option></select></td>
                            </tr>
                            <tr>
                                <td>车牌加密</td>
                                <td><select id="comm_encryption_fmt"><option value="0">不加密</option><option value="1">加密</option></select></td>
                            </tr>
                            <tr>
                                <td style="min-width:90px">汉字编码</td>
                                <td><select id="comm_encode_fmt"><option value="1">UTF-8</option><option value="2">GBK</option><option value="3">GB2312</option></select></td>
                            </tr>
                            <tr>
                                <td style="min-width:90px">车牌模式</td>
                                <td><select id="comm_ne_compatible"><option value="0">正常模式</option><option value="1">新能源兼容模式</option></select></td>
                            </tr>
                        </table>
                        <table style="margin:10px 0 30px 50px;min-width:200px; font-size:12px;">
                            <tr>
                                <td>语音配置</td>
                            </tr>
                            <tr>
                                <td style="min-width:112px"><input type="checkbox" name="启用语音" id="comm_voice" dmvalue="72D25E55" /><label for="comm_voice">启用语音</label></td>
                                <td><input type="checkbox" disabled name="播报车牌" id="comm_inc" /><label for="comm_inc">播报车牌</label></td>
                            </tr>
                            <tr>
                                <td>状态</td>
                                <td><select id="comm_voice_fmt"><option value="in">有效期内白名单</option><option value="out"><span style="white-space:nowrap;">白名单内已过期</span></option><option value="na">不在白名单内</option><option value="iw">白名单剩余天数</option></select></td>
                                
                            </tr>
                            <tr id="hide_remain_tr" style="display:none">
                                <td>剩余天数</td>
                                <td id="comm_remain_td"><select id="comm_remain_fmt"><option value="0">0天</option><option value="1">1天</option><option value="2">2天</option><option value="3">3天</option><option value="4">4天</option><option value="5">5天</option><option value="6">6天</option><option value="7">7天</option><option value="8">8天</option><option value="9">9天</option><option value="10">10天</option></select></td>
                            </tr>
                            <tr>
                                <td>语音头</td>
                                <td><input type="text" disabled id="comm_prefix_fmt" name="prefix" style="width:124px" /></td>
                            </tr>
                            <tr>
                                <td>语音尾</td>
                                <td><input type="text" disabled id="comm_suffix_fmt" name="suffix" style="width:124px" /></td>
                            </tr>
                        </table>
                        <table style="width:260px;border:none;margin-top: 10px; margin-left: 50px;min-width:200px; font-size:12px;">
                            <tr><td>快速配置</td></tr>
                            <tr>
                                <td colspan="3"><input type="radio" name="comm_cfg" id="comm_simple_cfg">简洁配置</td>
                            </tr>
                            <tr>
                                <td colspan="3"><input type="radio" name="comm_cfg" id="comm_normal_cfg">常规配置</td>
                            </tr>
                            <tr>
                                <td colspan="3"><input type="radio" name="comm_cfg" id="comm_all_cfg">全配置</td>
                            </tr>
                            <tr>
                                <td colspan="3">&nbsp;</td>
                            </tr>
                            <tr>
                                <td style="border:none;width:50px"><input type="submit" id="comm_moveup" value="上移" /></td>
                                <td style="border:none;width:50px"><input type="submit" id="comm_movedown" value="下移" /></td>
                                <td style="border:none;width:50px"><input type="submit" id="comm_set_submit" value="确定" /></td>
                            </tr>
                            <tr>
                                <td style="display:none;padding:20px;" align="right" class="sfm_info" colspan="3"></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <iframe name='hidden_frame' id="hidden_frame" style="visibility:hidden;height:10px"></iframe>
    <div class="div_overlay" style="width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,0.5);display:none;">
        <div style="width:500px;height:500px;background:red;">

        </div>
    </div>
    <div id="wl_dialog" style="width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,0.5);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000);display:none;">
        <div id="wl_dialog_inner" style="width:800px;height:250px;background:white;padding:30px;position:absolute;left:50%;top:50%;margin-top:-125px;margin-left:-400px;">
            <table class="dummy">
                <tr>
                    <td style="min-width:110px;">
                        车牌号码：
                    </td>
                    <td style="min-width:280px;">
                        <input type="text" id="wl_licence_txt" />
                    </td>
                    <td style="min-width:100px;">
                        车牌类型：
                    </td>
                    <td style="min-width:280px;">
                        <select id="wl_licence_type">
                            <option value="0">未知车牌</option>
                            <option value="1">蓝牌小汽车</option>
                            <option value="2">黑牌小汽车</option>
                            <option value="3">单排黄牌</option>
                            <option value="4">双排黄牌</option>
                            <option value="5">警车车牌</option>
                            <option value="6">武警车牌</option>
                            <option value="7">个性化车牌</option>
                            <option value="8">单排军车牌</option>
                            <option value="9">双排军车牌</option>
                            <option value="10">使馆车牌</option>
                            <option value="11">香港进出中国大陆车牌</option>
                            <option value="12">农用车牌</option>
                            <option value="13">教练车牌</option>
                            <option value="14">港澳进出中国大陆车牌</option>
                            <option value="15">双层武警车牌</option>
                            <option value="16">武警总队车牌</option>
                            <option value="17">双层武警总队车牌</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        是否启用：
                    </td>
                    <td>
                        <input type="checkbox" id="wl_enable" /><label for="wl_enable">是</label>
                    </td>
                    <td>
                        车辆颜色：
                    </td>
                    <td>
                        <select id="wl_licence_color">
                            <option value="0">未知</option>
                            <option value="1">白色</option>
                            <option value="2">灰色</option>
                            <option value="3">黄色</option>
                            <option value="4">粉色</option>
                            <option value="5">红色</option>
                            <option value="6">绿色</option>
                            <option value="7">蓝色</option>
                            <option value="8">棕色</option>
                            <option value="9">灰色</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        生效时间：
                    </td>
                    <td>
                        <input type="text" class="datepicker" id="wl_effect_time" />
                        <input type="text" id="wl_eff_hour" class="time_txt" value="00" />
                        时
                        <input type="text" id="wl_eff_min" class="time_txt" value="00" />
                        分
                        <input type="text" id="wl_eff_sec" class="time_txt" value="00" />
                        秒
                    </td>
                    <td>
                        过期时间：
                    </td>
                    <td>
                        <input type="text" class="datepicker" id="wl_out_time" />
                        <input type="text" id="wl_ot_hour" class="time_txt" value="00" />
                        时
                        <input type="text" id="wl_ot_min" class="time_txt" value="00" />
                        分
                        <input type="text" id="wl_ot_sec" class="time_txt" value="00" />
                        秒
                    </td>
                </tr>
                <tr>
                    <td>
                        启用时间段：
                    </td>
                    <td>
                        <input type="checkbox" id="wl_enable_time" /><label for="wl_enable_time">是</label>
                    </td>
                    <td>
                        时间段：
                    </td>
                    <td>
                        <input type="text" id="wl_time_bucket" />
                    </td>
                </tr>
                <tr>
                    <td>
                        是否为黑名单：
                    </td>
                    <td>
                        <input type="checkbox" id="wl_blacklist" /><label for="wl_blacklist">是</label>
                    </td>
                    <td>
                        客户名称：
                    </td>
                    <td>
                        <input type="text" id="wl_username" />
                    </td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <td colspan="3"></td>
                    <td>
                        <input type="submit" id="wl_submit" value="保存" />
                        <input type="submit" id="wl_close" value="关闭" />
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>
